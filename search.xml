<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>å¸¸ç”¨Markdownè¯­æ³•</title>
    <url>/2020/05/29/%E5%B8%B8%E7%94%A8Markdown%E8%AF%AD%E6%B3%95/</url>
    <content><![CDATA[<p>è¿™ç¯‡ä¸»è¦æ¥è®°å½•æˆ‘åˆæ­¥å»ºç«‹ markdown æ–‡ç« ä¸€äº›åŸºæœ¬æ“ä½œã€‚</p>
<h2 id="æ–°å»ºpage"><a href="#æ–°å»ºpage" class="headerlink" title="æ–°å»ºpage"></a>æ–°å»ºpage</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new page-name</span><br></pre></td></tr></table></figure>


<h3 id="ä¸€ã€æ ‡é¢˜"><a href="#ä¸€ã€æ ‡é¢˜" class="headerlink" title="ä¸€ã€æ ‡é¢˜"></a>ä¸€ã€æ ‡é¢˜</h3><p>ä¸€çº§æ ‡é¢˜å‰é¢ä¸€ä¸ª#ï¼ŒäºŒçº§æ ‡é¢˜å‰é¢ä¸¤ä¸ª#ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæ€»å…±åˆ°å…­çº§æ ‡é¢˜ï¼Œ#ä¸æ–‡å­—ä¹‹é—´ä¸€å®šè¦æœ‰ç©ºæ ¼ã€‚</p>
<h3 id="äºŒã€ä»£ç å—"><a href="#äºŒã€ä»£ç å—" class="headerlink" title="äºŒã€ä»£ç å—"></a>äºŒã€ä»£ç å—</h3><p>ç”¨å‰å ä¸‰ä¸ª` åŒ…è£¹ç€, ```åé¢å†™ä»€ä¹ˆè¯­è¨€å³å±•ç¤ºæ€æ ·çš„é«˜äº®æ ·å¼ï¼Œä¾‹å¦‚ï¼šhtmlã€javascript</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="è¡Œå†…ä»£ç "><a href="#è¡Œå†…ä»£ç " class="headerlink" title="è¡Œå†…ä»£ç "></a>è¡Œå†…ä»£ç </h4><p>å‰åä¸€ä¸ª ` åŒ…è£¹ï¼Œä¾‹ï¼š</p>
<p><code>è¡Œå†…ä»£ç </code></p>
<h3 id="ä¸‰ã€å¼•ç”¨"><a href="#ä¸‰ã€å¼•ç”¨" class="headerlink" title="ä¸‰ã€å¼•ç”¨"></a>ä¸‰ã€å¼•ç”¨</h3><p>ä½¿ç”¨ &gt; è¡¨ç¤ºå¼•ç”¨ï¼Œ &gt;&gt; è¡¨ç¤ºå¼•ç”¨é‡Œé¢å†å¥—ä¸€å±‚å¼•ç”¨ï¼Œä¾æ¬¡ç±»æ¨ã€‚</p>
<blockquote>
<p>â€˜&gt;â€™è¿™æ˜¯ä¸€çº§å¼•ç”¨</p>
<blockquote>
<p>â€˜&gt;&gt;â€™è¿™æ˜¯äºŒçº§å¼•ç”¨</p>
<blockquote>
<p>â€˜&gt;&gt;&gt;â€™è¿™æ˜¯ä¸‰çº§å¼•ç”¨</p>
</blockquote>
</blockquote>
</blockquote>
<h3 id="å››ã€é“¾æ¥"><a href="#å››ã€é“¾æ¥" class="headerlink" title="å››ã€é“¾æ¥"></a>å››ã€é“¾æ¥</h3><p>ä½¿ç”¨ â€œ <a href="link"> </a> â€ è¡¨ç¤ºè¡Œå†…é“¾æ¥ã€‚å…¶ä¸­ï¼š</p>
<p>[] å†…çš„å†…å®¹ä¸ºè¦æ·»åŠ é“¾æ¥çš„æ–‡å­—ã€‚</p>
<p>link ä¸ºé“¾æ¥åœ°å€ã€‚ä¾‹å¦‚ï¼š<a href="https://www.baidu.com" target="_blank" rel="noopener">ç™¾åº¦</a></p>
<blockquote>
<p>[ ç™¾åº¦ ] (<a href="https://www.baidu.com" target="_blank" rel="noopener">https://www.baidu.com</a>)</p>
</blockquote>
<h3 id="äº”ã€å¯¼å…¥å›¾ç‰‡"><a href="#äº”ã€å¯¼å…¥å›¾ç‰‡" class="headerlink" title="äº”ã€å¯¼å…¥å›¾ç‰‡"></a>äº”ã€å¯¼å…¥å›¾ç‰‡</h3><p>ä½¿ç”¨ â€œ ![Alt text] (png) â€ å¯¼å…¥å›¾ç‰‡ã€‚å…¶ä¸­ï¼š</p>
<p>Alt text ä¸ºå¦‚æœå›¾ç‰‡æ— æ³•æ˜¾ç¤ºæ—¶æ˜¾ç¤ºçš„æ–‡å­—ï¼›<br>png ä¸ºå›¾ç‰‡æ‰€åœ¨è·¯å¾„ï¼›<br>æœ¬åœ°å¼•ç”¨æ˜¯å›¾ç‰‡ç›´æ¥å­˜å‚¨åˆ°æœ¬åœ°é€šè¿‡ç›¸å¯¹è·¯å¾„å¼•ç”¨ï¼Œæ— éœ€ç½‘ç»œè¿æ¥<br>ä¸Šä¼ å›¾ç‰‡å°†æŠŠå›¾ç‰‡ä¸Šä¼ è‡³å›¾åºŠï¼Œè¿™æ ·åœ¨æ–‡æ¡£æˆ–å›¾ç‰‡ç§»åŠ¨æ—¶è®¤å¯è®¿é—®å›¾ç‰‡<br>ç¤ºä¾‹ï¼š<br><img src="https://fech.in/static/images/cover/ml01-overview.jpeg" alt="å›¾ç‰‡æ— æ³•æ˜¾ç¤ºæ—¶æ˜¾ç¤ºçš„æ–‡å­—"></p>
<h3 id="å…­ã€Todo-List"><a href="#å…­ã€Todo-List" class="headerlink" title="å…­ã€Todo List"></a>å…­ã€Todo List</h3><p>å°å†™ x è¡¨ç¤ºå·²å®Œæˆï¼Œ ç©ºæ ¼è¡¨ç¤ºæœªå®Œæˆ</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> é€‰ä¸­</li>
<li><input disabled="" type="checkbox"> æœªé€‰ä¸­<br>æ–¹æ³•ï¼š<blockquote>
<p>-ä¸[]ä¹‹é—´é¡»æœ‰ç©ºæ ¼ -[x] ä¾‹ 1 -[ ] ä¾‹ 2</p>
</blockquote>
</li>
</ul>
<h3 id="ä¸ƒã€ç²—ä½“ï¼Œæ–œä½“ï¼Œé«˜äº®å’Œåˆ é™¤çº¿"><a href="#ä¸ƒã€ç²—ä½“ï¼Œæ–œä½“ï¼Œé«˜äº®å’Œåˆ é™¤çº¿" class="headerlink" title="ä¸ƒã€ç²—ä½“ï¼Œæ–œä½“ï¼Œé«˜äº®å’Œåˆ é™¤çº¿"></a>ä¸ƒã€ç²—ä½“ï¼Œæ–œä½“ï¼Œé«˜äº®å’Œåˆ é™¤çº¿</h3><p>ä¾‹å¦‚<strong>ç²—ä½“</strong></p>
<blockquote>
<p>** ç²—ä½“ç¤ºä¾‹ **</p>
</blockquote>
<p><em>æ–œä½“</em></p>
<blockquote>
<p>*æ–œä½“ *</p>
</blockquote>
<p><strong><em>ç²—åŠ æ–œä½“</em></strong></p>
<blockquote>
<p><strong>* ç²—åŠ æ–œä½“ *</strong></p>
</blockquote>
<blockquote>
<p>==é«˜äº®==<br>éƒ¨åˆ†ç¼–è¾‘å™¨ä¸æ”¯æŒé«˜äº®</p>
</blockquote>
<p><del>åˆ é™¤çº¿</del></p>
<blockquote>
<p><del>~ åˆ é™¤çº¿ ~</del></p>
</blockquote>
<h3 id="å…«ã€åˆ—è¡¨"><a href="#å…«ã€åˆ—è¡¨" class="headerlink" title="å…«ã€åˆ—è¡¨"></a>å…«ã€åˆ—è¡¨</h3><p>ä½¿ç”¨ 1. 1. 1. è¡¨ç¤ºæœ‰åºåˆ—è¡¨ï¼Œä½¿ç”¨ * æˆ– - æˆ– + è¡¨ç¤ºæ— åºåˆ—è¡¨ã€‚</p>
<ol>
<li>åˆ—è¡¨ä¸€</li>
<li>åˆ—è¡¨äºŒ</li>
<li>åˆ—è¡¨ä¸‰</li>
</ol>
<blockquote>
<p>1.åˆ—è¡¨ä¸€ 1.åˆ—è¡¨äºŒ 1.åˆ—è¡¨ä¸‰<br>è®°å¾— 1. ä¸åˆ—è¡¨æ–‡å­—ä¹‹é—´éœ€è¦æœ‰ç©ºæ ¼</p>
</blockquote>
<ul>
<li>1 åˆ—è¡¨ä¸€<ul>
<li>2 åˆ—è¡¨äºŒ</li>
</ul>
</li>
</ul>
<blockquote>
<p>*1 åˆ—è¡¨ä¸€<br>*2 åˆ—è¡¨äºŒ<br>äºŒçº§åˆ—è¡¨éœ€è¦ç¼©è¿›ä¸€ä¸ªå­—ç¬¦</p>
</blockquote>
<h3 id="ä¹ã€åˆ†å‰²çº¿"><a href="#ä¹ã€åˆ†å‰²çº¿" class="headerlink" title="ä¹ã€åˆ†å‰²çº¿"></a>ä¹ã€åˆ†å‰²çº¿</h3><p>åˆ†å‰²çº¿ï¼šâ€” æˆ–è€…*** è‡ªåŠ¨å‡ºæ¥åˆ†å‰²çº¿</p>
<hr>
<h3 id="åã€emoji"><a href="#åã€emoji" class="headerlink" title="åã€emoji"></a>åã€emoji</h3><p>ä½¿ç”¨ :emojiä»£ç : åœ¨ markdown é‡Œæ·»åŠ  emoji ğŸ˜²</p>
<p><a href="https://www.webfx.com/tools/emoji-cheat-sheet/" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æ‰€æœ‰æ”¯æŒçš„ emoji ä»£ç </a></p>
<p>â— éƒ¨åˆ†ç¼–è¾‘å™¨ä¸æ”¯æŒ emoji code </p>
<p>å»ºè®®ç›´æ¥è¾“å…¥ emojiï¼Œ<a href="https://www.emojidaquan.com" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹å¹¶å¤åˆ¶ emoji</a></p>
]]></content>
      <categories>
        <category>markdownåŸºç¡€</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>vue-cli4æ€§èƒ½ä¼˜åŒ–</title>
    <url>/2020/06/17/vue-cli4%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<h3 id="Gzipå‹ç¼©"><a href="#Gzipå‹ç¼©" class="headerlink" title="Gzipå‹ç¼©"></a><strong>Gzipå‹ç¼©</strong></h3><p>gizp å‹ç¼©æ˜¯ä¸€ç§ http è¯·æ±‚ä¼˜åŒ–æ–¹å¼ï¼Œé€šè¿‡å‡å°‘æ–‡ä»¶ä½“ç§¯æ¥æé«˜åŠ è½½é€Ÿåº¦ï¼Œå¯¹äºç”¨æˆ·é‡å¤šçš„ç½‘ç«™ï¼Œå¼€å¯ gizp å‹ç¼©ä¼šå¤§å¤§é™ä½æœåŠ¡å™¨å‹åŠ›ï¼Œæé«˜åŠ è½½é€Ÿåº¦ï¼Œé™ä½æœåŠ¡å™¨æµé‡æˆæœ¬</p>
<p><strong>å‹ç¼©å®Œæˆç¤ºä¾‹</strong></p>
<p><img src="https://s1.ax1x.com/2020/06/17/NEaSSS.png" alt="NEaSSS.png"></p>
<blockquote>
<p>å®‰è£…æ’ä»¶</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">cnpm install compression-webpack-plugin --save-de</span><br></pre></td></tr></table></figure>


<blockquote>
<p>åœ¨vue.config.jsä¸­é…ç½®</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥compression-webpack-plugin</span></span><br><span class="line"><span class="keyword">const</span> CompressionWebpackPlugin = <span class="built_in">require</span>(<span class="string">"compression-webpack-plugin"</span>);</span><br><span class="line"><span class="comment">// å®šä¹‰å‹ç¼©æ–‡ä»¶ç±»å‹</span></span><br><span class="line"><span class="keyword">const</span> productionGzipExtensions = [<span class="string">"js"</span>, <span class="string">"css"</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//ç»Ÿä¸€é…ç½®æ‰“åŒ…æ’ä»¶</span></span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> CompressionWebpackPlugin(&#123;</span><br><span class="line">        filename: <span class="string">"[path].gz[query]"</span>,</span><br><span class="line">        algorithm: <span class="string">"gzip"</span>,</span><br><span class="line">        test: <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\.("</span> + productionGzipExtensions.join(<span class="string">"|"</span>) + <span class="string">")$"</span>), <span class="comment">//åŒ¹é…æ–‡ä»¶å</span></span><br><span class="line">        threshold: <span class="number">10240</span>, <span class="comment">//å¯¹10Kä»¥ä¸Šçš„æ•°æ®è¿›è¡Œå‹ç¼©</span></span><br><span class="line">        minRatio: <span class="number">0.8</span>,</span><br><span class="line">        deleteOriginalAssets: <span class="literal">false</span>, <span class="comment">//æ˜¯å¦åˆ é™¤æºæ–‡ä»¶</span></span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨æœåŠ¡å™¨çš„ nginxçš„httpä¸­é…ç½® Gzip</p>
</blockquote>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">gzip on; #å¼€å¯æˆ–å…³é—­gzip on off</span><br><span class="line">gzip_min_length 5k; #gzipå‹ç¼©æœ€å°æ–‡ä»¶å¤§å°ï¼Œè¶…å‡ºè¿›è¡Œå‹ç¼©ï¼ˆè‡ªè¡Œè°ƒèŠ‚ï¼‰</span><br><span class="line">gzip_buffers 4 16k; #buffer ä¸ç”¨ä¿®æ”¹</span><br><span class="line">gzip_comp_level 4; #å‹ç¼©çº§åˆ«:1-10ï¼Œæ•°å­—è¶Šå¤§å‹ç¼©çš„è¶Šå¥½ï¼Œæ—¶é—´ä¹Ÿè¶Šé•¿</span><br><span class="line">gzip_types text/plain application/x-javascript application/javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png; #  å‹ç¼©æ–‡ä»¶ç±»å‹</span><br><span class="line">gzip_vary on; # å’Œhttpå¤´æœ‰å…³ç³»ï¼ŒåŠ ä¸ªvaryå¤´ï¼Œç»™ä»£ç†æœåŠ¡å™¨ç”¨çš„ï¼Œæœ‰çš„æµè§ˆå™¨æ”¯æŒå‹ç¼©ï¼Œæœ‰çš„ä¸æ”¯æŒï¼Œæ‰€ä»¥é¿å…æµªè´¹ä¸æ”¯æŒçš„ä¹Ÿå‹ç¼©ï¼Œæ‰€ä»¥æ ¹æ®å®¢æˆ·ç«¯çš„HTTPå¤´æ¥åˆ¤æ–­ï¼Œæ˜¯å¦éœ€è¦å‹ç¼©</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¿®æ”¹åè®°å¾—æ‰§è¡Œ nginx -s reload</p>
</blockquote>
<h3 id="å»æ‰æ‰“åŒ…åçš„-console"><a href="#å»æ‰æ‰“åŒ…åçš„-console" class="headerlink" title="å»æ‰æ‰“åŒ…åçš„ console"></a><strong>å»æ‰æ‰“åŒ…åçš„ console</strong></h3><blockquote>
<p>å®‰è£æ’ä»¶</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">cnpm install babel-plugin-transform-remove-<span class="built_in">console</span> --save-dev</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ã€babel.config.jsã€‘é…ç½®å¦‚ä¸‹</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> plugins = [<span class="string">"@vue/babel-plugin-transform-vue-jsx"</span>];</span><br><span class="line"><span class="comment">// ç”Ÿäº§ç¯å¢ƒç§»é™¤console</span></span><br><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">"production"</span>) &#123;</span><br><span class="line">  plugins.push(<span class="string">"transform-remove-console"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: plugins,</span><br><span class="line">  presets: [<span class="string">"@vue/cli-plugin-babel/preset"</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ‰“åŒ…éƒ¨ç½²åï¼Œç”Ÿäº§ç¯å¢ƒçš„ console å°±å…¨éƒ¨å»æ‰äº†~</p>
</blockquote>
<h3 id="å›¾ç‰‡æ‡’åŠ è½½"><a href="#å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="å›¾ç‰‡æ‡’åŠ è½½"></a><strong>å›¾ç‰‡æ‡’åŠ è½½</strong></h3><blockquote>
<p>å®‰è£…ä¾èµ–</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">cnpm i vue-lazyload -S</span><br></pre></td></tr></table></figure>

<blockquote>
<p>main.js ä¸­ç›´æ¥å¼•ç”¨</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> VueLazyload <span class="keyword">from</span> <span class="string">"vue-lazyload"</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(VueLazyload);</span><br><span class="line"></span><br><span class="line"><span class="comment">// or with options</span></span><br><span class="line">Vue.use(VueLazyload, &#123;</span><br><span class="line">  <span class="comment">//é¢„åŠ è½½é«˜åº¦</span></span><br><span class="line">  preLoad: <span class="number">1.3</span>,</span><br><span class="line">  <span class="comment">//é”™è¯¯æ—¶æ˜¾ç¤ºçš„å›¾ç‰‡</span></span><br><span class="line">  error: <span class="string">"static/about111.jpg"</span>,</span><br><span class="line">  <span class="comment">//å›¾ç‰‡åŠ è½½ä¸­æ˜¾ç¤ºçš„å›¾ç‰‡</span></span><br><span class="line">  loading: <span class="string">"static/img/loading.gif"</span>,</span><br><span class="line">  <span class="comment">//å°è¯•åŠ è½½æ¬¡æ•°</span></span><br><span class="line">  attempt: <span class="number">1</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨æ—¶ï¼Œå°† img æ ‡ç­¾çš„ src æ¢æˆ v-lazyï¼š</p>
</blockquote>
<ol>
<li>æœªä½¿ç”¨æ‡’åŠ è½½å‰çš„ä»£ç ï¼š<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;li&gt;&lt;img class&#x3D;&quot;g-img1&quot; src&#x3D;&quot;static&#x2F;1.jpg&quot; alt&#x3D;&quot;&quot; &#x2F;&gt;&lt;&#x2F;li&gt;</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨æ‡’åŠ è½½åçš„ä»£ç ï¼š<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;li&gt;&lt;img class&#x3D;&quot;g-img1&quot; v-lazy&#x3D;&quot;&#39;static&#x2F;1.jpg&#39;&quot; alt&#x3D;&quot;&quot; &#x2F;&gt;&lt;&#x2F;li&gt;</span><br></pre></td></tr></table></figure>


</li>
</ol>
]]></content>
      <categories>
        <category>vueé…ç½®</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>wxæ”¯ä»˜åˆ†äº«</title>
    <url>/2020/06/17/wx%E6%94%AF%E4%BB%98%E5%88%86%E4%BA%AB/</url>
    <content><![CDATA[<h3 id="wx-æ”¯ä»˜"><a href="#wx-æ”¯ä»˜" class="headerlink" title="wx æ”¯ä»˜"></a><strong>wx æ”¯ä»˜</strong></h3><blockquote>
<p>è¯·æ±‚åå°æ¥å£è·å– wx éœ€è¦æ•°æ®</p>
</blockquote>
<p>å°†è¯·æ±‚æ¥å£å¾—æ¥çš„æ•°æ®å­˜åˆ°å…¨å±€å˜é‡é‡Œé¢  payData ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Ajax(<span class="string">"post"</span>, <span class="string">"/api"</span>, obj)</span><br><span class="line">  .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> data = res.data;</span><br><span class="line">    <span class="keyword">this</span>.payData = data;</span><br><span class="line">    <span class="comment">//wxåˆ¤æ–­æ”¯ä»˜ç¯å¢ƒæ˜¯å¦å¯ç”¨ï¼Œè‹¥ç¯å¢ƒå‡†å¤‡å¥½æ¥ç€è°ƒç”¨ onBridgeReady()æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> WeixinJSBridge == <span class="string">"undefined"</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">document</span>.addEventListener) &#123;</span><br><span class="line">        <span class="built_in">document</span>.addEventListener(<span class="string">"WeixinJSBridgeReady"</span>, onBridgeReady, <span class="literal">false</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.attachEvent) &#123;</span><br><span class="line">        <span class="built_in">document</span>.attachEvent(<span class="string">"WeixinJSBridgeReady"</span>, onBridgeReady);</span><br><span class="line">        <span class="built_in">document</span>.attachEvent(<span class="string">"onWeixinJSBridgeReady"</span>, onBridgeReady);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.onBridgeReady();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    alert(e);</span><br><span class="line">    <span class="keyword">this</span>.canSubmit = <span class="literal">true</span>;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å°†åå°è¿”å›çš„å‚æ•°ä¼ åˆ° wx</p>
</blockquote>
<p>è°ƒç”¨ wx æ”¯ä»˜æ–¹æ³•ï¼Œå°†ä¸Šé¢è¯·æ±‚åå°æ¥å£è¿”å›çš„å‚æ•°ä¼ ç»™ wx ã€‚åœ¨ç”¨æˆ·æ”¯ä»˜æˆåŠŸåè¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¾®ä¿¡æ”¯ä»˜</span></span><br><span class="line">          onBridgeReady() &#123;</span><br><span class="line">              <span class="keyword">let</span> that = <span class="keyword">this</span>;</span><br><span class="line">              WeixinJSBridge.invoke(</span><br><span class="line">                  <span class="string">'getBrandWCPayRequest'</span>, &#123;</span><br><span class="line">                      <span class="string">"appId"</span>: <span class="keyword">this</span>.payData.appId,     <span class="comment">//å…¬ä¼—å·åç§°ï¼Œç”±å•†æˆ·ä¼ å…¥</span></span><br><span class="line">                      <span class="string">"timeStamp"</span>: <span class="keyword">this</span>.payData.timeStamp,         <span class="comment">//æ—¶é—´æˆ³ï¼Œè‡ª1970å¹´ä»¥æ¥çš„ç§’æ•°</span></span><br><span class="line">                      <span class="string">"nonceStr"</span>: <span class="keyword">this</span>.payData.nonceStr, <span class="comment">//éšæœºä¸²</span></span><br><span class="line">                      <span class="string">"package"</span>: <span class="keyword">this</span>.payData.package,</span><br><span class="line">                      <span class="string">"signType"</span>: <span class="keyword">this</span>.payData.signType,         <span class="comment">//å¾®ä¿¡ç­¾åæ–¹å¼ï¼š</span></span><br><span class="line">                      <span class="string">"paySign"</span>: <span class="keyword">this</span>.payData.paySign <span class="comment">//å¾®ä¿¡ç­¾å</span></span><br><span class="line">                  &#125;,</span><br><span class="line">                  <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                      <span class="keyword">if</span> (res.err_msg == <span class="string">"get_brand_wcpay_request:ok"</span>) &#123;</span><br><span class="line">                          <span class="comment">//æ”¯ä»˜æˆåŠŸ</span></span><br><span class="line">                          <span class="built_in">window</span>.location.href=<span class="string">"/activity"</span>;</span><br><span class="line"></span><br><span class="line">                      &#125;<span class="keyword">else</span> <span class="keyword">if</span> (res.err_msg == <span class="string">"get_brand_wcpay_request:fail"</span>) &#123;</span><br><span class="line">                          <span class="comment">// ä½¿ç”¨ä»¥ä¸Šæ–¹å¼åˆ¤æ–­å‰ç«¯è¿”å›,å¾®ä¿¡å›¢é˜Ÿéƒ‘é‡æç¤ºï¼š</span></span><br><span class="line">                          <span class="comment">//res.err_msgå°†åœ¨ç”¨æˆ·æ”¯ä»˜æˆåŠŸåè¿”å›okï¼Œä½†å¹¶ä¸ä¿è¯å®ƒç»å¯¹å¯é ã€‚</span></span><br><span class="line">                          alert(res.err_msg);</span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;);</span><br><span class="line">          &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="wx-æ‰«ç æ”¯ä»˜-QRcode-äºŒç»´ç "><a href="#wx-æ‰«ç æ”¯ä»˜-QRcode-äºŒç»´ç " class="headerlink" title="wx æ‰«ç æ”¯ä»˜-QRcode äºŒç»´ç "></a><strong>wx æ‰«ç æ”¯ä»˜-QRcode äºŒç»´ç </strong></h3><blockquote>
<p>å¼•å…¥ QRcode</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">cnpm install qrcodejs2</span><br><span class="line"><span class="keyword">import</span> QRCode <span class="keyword">from</span> <span class="string">"qrcodejs2"</span>; <span class="comment">// å¼•å…¥qrcode</span></span><br><span class="line"><span class="keyword">let</span> qrcode;</span><br><span class="line">&lt;div id=<span class="string">"qrcode"</span>&gt;&lt;<span class="regexp">/div&gt;;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä»æ¥å£è·å–äºŒç»´ç åœ°å€ å¹¶ç”ŸæˆäºŒç»´ç </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"qrcode"</span>).innerHTML = <span class="string">""</span>;</span><br><span class="line">  qrcode = <span class="keyword">new</span> QRCode(<span class="string">"qrcode"</span>, &#123;</span><br><span class="line">    width: <span class="number">280</span>,</span><br><span class="line">    height: <span class="number">280</span>,</span><br><span class="line">    text: res.data.data, <span class="comment">// äºŒç»´ç åœ°å€</span></span><br><span class="line">    colorDark: <span class="string">"#000"</span>,</span><br><span class="line">    colorLight: <span class="string">"#fff"</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br></pre></td></tr></table></figure>

<h3 id="wx-åˆ†äº«"><a href="#wx-åˆ†äº«" class="headerlink" title="wx åˆ†äº«"></a><strong>wx åˆ†äº«</strong></h3><blockquote>
<p>jquery å¼•å…¥æ ‡ç­¾</p>
</blockquote>
<p>è¿˜éœ€è¦å¼•å…¥   jweixin-1.4.0.js  æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶åœ¨ E ç›˜â€œå¼•ç”¨çš„æ–‡ä»¶â€js æ–‡ä»¶ä¸­ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¾®ä¿¡åˆ†äº«--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/js/jweixin-1.4.0.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>vue åœ¨ main.js ä¸­å¼•å…¥</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥å¾®ä¿¡åˆ†äº«</span></span><br><span class="line"><span class="keyword">import</span> wx <span class="keyword">from</span> <span class="string">"weixin-js-sdk"</span>;</span><br><span class="line">Vue.use(wx);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨ h5.js é‡Œé¢è¿›è¡Œå°è£…</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥å¾®ä¿¡åˆ†äº«</span></span><br><span class="line"><span class="keyword">import</span> wx <span class="keyword">from</span> <span class="string">"weixin-js-sdk"</span>;</span><br><span class="line"><span class="comment">//å¾®ä¿¡åˆ†äº«</span></span><br><span class="line"><span class="keyword">let</span> wxShareIntval;</span><br><span class="line"><span class="keyword">let</span> wxShareIntvalIndex=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> iosEdition = navigator.userAgent;</span><br><span class="line"><span class="keyword">let</span> isIphone = !!iosEdition.match(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¦æ­¢å¾®ä¿¡åˆ†äº«</span></span><br><span class="line">    prohibitShare() &#123;</span><br><span class="line">        <span class="comment">// ç¦æ­¢åˆ†äº«</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> WeixinJSBridge == <span class="string">"undefined"</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">document</span>.addEventListener) &#123;</span><br><span class="line">                    <span class="built_in">document</span>.addEventListener(<span class="string">'WeixinJSBridgeReady'</span>, <span class="keyword">this</span>.onBridgeReady(), <span class="literal">false</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.attachEvent) &#123;</span><br><span class="line">                    <span class="built_in">document</span>.attachEvent(<span class="string">'WeixinJSBridgeReady'</span>, <span class="keyword">this</span>.onBridgeReady());</span><br><span class="line">                    <span class="built_in">document</span>.attachEvent(<span class="string">'onWeixinJSBridgeReady'</span>, <span class="keyword">this</span>.onBridgeReady());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.onBridgeReady();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(e)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–æ—¶å±è”½åˆ†äº«æŒ‰é’®é˜²æ­¢ç‚¹å‡»</span></span><br><span class="line">    onBridgeReady() &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            WeixinJSBridge.call(<span class="string">'hideOptionMenu'</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//å®šæ—¶å™¨ï¼Œè¯·æ±‚å®Œæ•°æ®ä¹‹åæ‰å¯ä»¥è¿›è¡Œwxåˆ†äº«</span></span><br><span class="line">    shareTimer(shareObj) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(process.env.NODE_ENV);</span><br><span class="line">        <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">"development"</span> || !Vue.prototype.isWechat) &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// wxShareIntval = setInterval(() =&gt; &#123;</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">document</span>.readyState == <span class="string">"complete"</span>) &#123; <span class="comment">//å½“é¡µé¢åŠ è½½çŠ¶æ€ä¸ºå®Œå…¨ç»“æŸæ—¶è¿›å…¥</span></span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">typeof</span> WeixinJSBridge == <span class="string">"undefined"</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (<span class="built_in">document</span>.addEventListener) &#123;</span><br><span class="line">                            <span class="built_in">document</span>.addEventListener(<span class="string">'WeixinJSBridgeReady'</span>, <span class="keyword">this</span>.getWxShare(shareObj), <span class="literal">false</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.attachEvent) &#123;</span><br><span class="line">                            <span class="built_in">document</span>.attachEvent(<span class="string">'WeixinJSBridgeReady'</span>, <span class="keyword">this</span>.getWxShare(shareObj));</span><br><span class="line">                            <span class="built_in">document</span>.attachEvent(<span class="string">'onWeixinJSBridgeReady'</span>, <span class="keyword">this</span>.getWxShare(shareObj));</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">//å¾®ä¿¡åˆ†äº«é…ç½®</span></span><br><span class="line">                        <span class="keyword">this</span>.getWxShare(shareObj);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// wxShareIntvalIndex++;</span></span><br><span class="line">            <span class="comment">// if (wxShareIntvalIndex &gt; 10) &#123;</span></span><br><span class="line">            <span class="comment">//     clearInterval(wxShareIntval);</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// &#125;, 500)</span></span><br><span class="line">    &#125;,</span><br><span class="line">    getWxShare(shareObj) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> href = location.href.split(<span class="string">'#'</span>)[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">if</span> (!isIphone) &#123;</span><br><span class="line">                href = location.href.split(<span class="string">'#'</span>)[<span class="number">0</span>].split(<span class="string">'?from'</span>)[<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> obj = &#123;</span><br><span class="line">                url: href</span><br><span class="line">            &#125;</span><br><span class="line">            Vue.prototype.$http.get(<span class="string">'/api/user/wx/share'</span>, obj,<span class="string">'hideLoad'</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> data = res.data;</span><br><span class="line">                setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">this</span>.wxShare(data, shareObj);</span><br><span class="line">                &#125;, <span class="number">500</span>)</span><br><span class="line">            &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    wxShare(data, shareObj) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            wx.config(&#123;</span><br><span class="line">                debug: <span class="literal">false</span>,</span><br><span class="line">                appId: data.data.appId, <span class="comment">// å’Œè·å–Tickeçš„å¿…é¡»ä¸€æ ·------å¿…å¡«ï¼Œå…¬ä¼—å·çš„å”¯ä¸€æ ‡è¯†</span></span><br><span class="line">                timestamp: data.data.timestamp, <span class="comment">// å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„æ—¶é—´æˆ³</span></span><br><span class="line">                nonceStr: data.data.nonceStr, <span class="comment">// å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„éšæœºä¸²</span></span><br><span class="line">                signature: data.data.signature, <span class="comment">// å¿…å¡«ï¼Œç­¾åï¼Œè§é™„å½•1</span></span><br><span class="line">                <span class="comment">//éœ€è¦åˆ†äº«çš„åˆ—è¡¨é¡¹:å‘é€ç»™æœ‹å‹ï¼Œåˆ†äº«åˆ°æœ‹å‹åœˆ</span></span><br><span class="line">                jsApiList: [<span class="string">"updateTimelineShareData"</span>, <span class="string">"updateAppMessageShareData"</span>, <span class="string">"onMenuShareTimeline"</span>, <span class="string">"onMenuShareAppMessage"</span>, <span class="string">'checkJsApi'</span>, <span class="string">'openLocation'</span>, <span class="string">'getLocation'</span>]</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">//å¤„ç†éªŒè¯å¤±è´¥çš„ä¿¡æ¯</span></span><br><span class="line">            wx.error(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                <span class="comment">// alert(JSON.stringify(res));</span></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// // //å¾®ä¿¡åˆ†äº«é…ç½®</span></span><br><span class="line">            <span class="comment">// if (isIphone) &#123;</span></span><br><span class="line">            <span class="comment">//     shareObj.share_url = encodeURI(shareObj.share_url)</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">            <span class="comment">//å¾®ä¿¡åˆ†äº«é…ç½®</span></span><br><span class="line">            history.replaceState(&#123;&#125;, shareObj.share_title, shareObj.share_url);</span><br><span class="line">            shareObj.share_url = <span class="built_in">window</span>.location.href;</span><br><span class="line">            wx.ready(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                WeixinJSBridge.call(<span class="string">'showOptionMenu'</span>);</span><br><span class="line">                clearInterval(wxShareIntval);</span><br><span class="line">                <span class="keyword">if</span> (isIphone) &#123;</span><br><span class="line">                    <span class="comment">//åˆ†äº«åˆ°æœ‹å‹åœˆ</span></span><br><span class="line">                    wx.updateTimelineShareData(&#123;</span><br><span class="line">                        title: shareObj.share_title, <span class="comment">// åˆ†äº«æ ‡é¢˜</span></span><br><span class="line">                        desc: shareObj.share_des, <span class="comment">// åˆ†äº«æè¿°</span></span><br><span class="line">                        link: shareObj.share_url, <span class="comment">// åˆ†äº«é“¾æ¥ï¼Œè¯¥é“¾æ¥åŸŸåæˆ–è·¯å¾„å¿…é¡»ä¸å½“å‰é¡µé¢å¯¹åº”çš„å…¬ä¼—å·JSå®‰å…¨åŸŸåä¸€è‡´</span></span><br><span class="line">                        imgUrl: shareObj.share_img, <span class="comment">// åˆ†äº«å›¾æ ‡</span></span><br><span class="line">                        success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                            <span class="comment">// ç”¨æˆ·ç¡®è®¤åˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">//                            showTips("æˆåŠŸåˆ†äº«æœ‹å‹åœˆ")</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        cancel: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                            <span class="comment">// ç”¨æˆ·å–æ¶ˆåˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span></span><br><span class="line">                            <span class="comment">// showTips("å–æ¶ˆåˆ†äº«åˆ°æœ‹å‹åœˆè¿”å›:" + res);</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="comment">//åˆ†äº«ç»™æœ‹å‹</span></span><br><span class="line">                    wx.updateAppMessageShareData(&#123;</span><br><span class="line">                        title: shareObj.share_title, <span class="comment">// åˆ†äº«æ ‡é¢˜</span></span><br><span class="line">                        desc: shareObj.share_des, <span class="comment">// åˆ†äº«æè¿°</span></span><br><span class="line">                        link: shareObj.share_url, <span class="comment">// åˆ†äº«é“¾æ¥ï¼Œè¯¥é“¾æ¥åŸŸåæˆ–è·¯å¾„å¿…é¡»ä¸å½“å‰é¡µé¢å¯¹åº”çš„å…¬ä¼—å·JSå®‰å…¨åŸŸåä¸€è‡´</span></span><br><span class="line">                        imgUrl: shareObj.share_img, <span class="comment">// åˆ†äº«å›¾æ ‡</span></span><br><span class="line">                        type: <span class="string">""</span>, <span class="comment">// åˆ†äº«ç±»å‹,musicã€videoæˆ–linkï¼Œä¸å¡«é»˜è®¤ä¸ºlink</span></span><br><span class="line">                        dataUrl: <span class="string">""</span>, <span class="comment">// å¦‚æœtypeæ˜¯musicæˆ–videoï¼Œåˆ™è¦æä¾›æ•°æ®é“¾æ¥ï¼Œé»˜è®¤ä¸ºç©º</span></span><br><span class="line">                        success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                            <span class="comment">// ç”¨æˆ·ç¡®è®¤åˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">//                            showTips("æˆåŠŸåˆ†äº«ç»™æœ‹å‹")</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        cancel: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                            <span class="comment">// ç”¨æˆ·å–æ¶ˆåˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//åˆ†äº«åˆ°æœ‹å‹åœˆ</span></span><br><span class="line">                    wx.onMenuShareTimeline(&#123;</span><br><span class="line">                        title: shareObj.share_title, <span class="comment">// åˆ†äº«æ ‡é¢˜</span></span><br><span class="line">                        desc: shareObj.share_des, <span class="comment">// åˆ†äº«æè¿°</span></span><br><span class="line">                        link: shareObj.share_url, <span class="comment">// åˆ†äº«é“¾æ¥ï¼Œè¯¥é“¾æ¥åŸŸåæˆ–è·¯å¾„å¿…é¡»ä¸å½“å‰é¡µé¢å¯¹åº”çš„å…¬ä¼—å·JSå®‰å…¨åŸŸåä¸€è‡´</span></span><br><span class="line">                        imgUrl: shareObj.share_img, <span class="comment">// åˆ†äº«å›¾æ ‡</span></span><br><span class="line">                        success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                            <span class="comment">// ç”¨æˆ·ç¡®è®¤åˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">                        &#125;,</span><br><span class="line">                        cancel: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                            <span class="comment">// ç”¨æˆ·å–æ¶ˆåˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span></span><br><span class="line">                            <span class="comment">// showTips("å–æ¶ˆåˆ†äº«åˆ°æœ‹å‹åœˆè¿”å›:" + res);</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="comment">//åˆ†äº«ç»™æœ‹å‹</span></span><br><span class="line">                    wx.onMenuShareAppMessage(&#123;</span><br><span class="line">                        title: shareObj.share_title, <span class="comment">// åˆ†äº«æ ‡é¢˜</span></span><br><span class="line">                        desc: shareObj.share_des, <span class="comment">// åˆ†äº«æè¿°</span></span><br><span class="line">                        link: shareObj.share_url, <span class="comment">// åˆ†äº«é“¾æ¥ï¼Œè¯¥é“¾æ¥åŸŸåæˆ–è·¯å¾„å¿…é¡»ä¸å½“å‰é¡µé¢å¯¹åº”çš„å…¬ä¼—å·JSå®‰å…¨åŸŸåä¸€è‡´</span></span><br><span class="line">                        imgUrl: shareObj.share_img, <span class="comment">// åˆ†äº«å›¾æ ‡</span></span><br><span class="line">                        type: <span class="string">""</span>, <span class="comment">// åˆ†äº«ç±»å‹,musicã€videoæˆ–linkï¼Œä¸å¡«é»˜è®¤ä¸ºlink</span></span><br><span class="line">                        dataUrl: <span class="string">""</span>, <span class="comment">// å¦‚æœtypeæ˜¯musicæˆ–videoï¼Œåˆ™è¦æä¾›æ•°æ®é“¾æ¥ï¼Œé»˜è®¤ä¸ºç©º</span></span><br><span class="line">                        success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                            <span class="comment">// ç”¨æˆ·ç¡®è®¤åˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        cancel: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                            <span class="comment">// ç”¨æˆ·å–æ¶ˆåˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¼•ç”¨</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">mounted() &#123;</span><br><span class="line">    <span class="comment">//ç¦æ­¢åˆ†äº«</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        prohibitShare();</span><br><span class="line">        <span class="keyword">this</span>.shareWx();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        alert(e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">    shareWx() &#123;</span><br><span class="line">        <span class="keyword">let</span> shareObj = &#123;</span><br><span class="line">            share_title: <span class="string">"åˆ†äº«æ ‡é¢˜"</span>,</span><br><span class="line">            share_des: <span class="string">"åˆ†äº«æè¿°"</span>,</span><br><span class="line">            share_img: <span class="string">'åˆ†äº«å›¾ç‰‡'</span>,</span><br><span class="line">            share_url: <span class="string">`url`</span></span><br><span class="line">        &#125;</span><br><span class="line">        shareTimer(shareObj)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wx</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>vue-cropperå›¾ç‰‡è£å‰ª</title>
    <url>/2020/07/14/vue-cropper%E5%9B%BE%E7%89%87%E8%A3%81%E5%89%AA/</url>
    <content><![CDATA[<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a><strong>ä½¿ç”¨</strong></h3><blockquote>
<p>å®‰è£…å¼•ç”¨</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">cnpm install cropperjs</span><br><span class="line"><span class="comment">// å¼•å…¥</span></span><br><span class="line"><span class="keyword">import</span> Cropper <span class="keyword">from</span> <span class="string">'cropperjs'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'cropperjs/dist/cropper.min.css'</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸Šä¼ å‰ªè£</p>
</blockquote>
<p>ä¸Šä¼ å›¾ç‰‡åˆ° oss ç„¶åè¿›è¡Œè£å‰ªå°† xï¼Œyï¼Œwidthï¼Œheight æ‹¼æ¥åˆ°å›¾ç‰‡é“¾æ¥ä¸Šå³å®Œæˆè£å‰ªã€‚</p>
<p>åœ¨å¼¹æ¡†ä¸­å®ç°å›¾ç‰‡è£å‰ªåŠé¢„è§ˆã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content_div"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ä¸Šä¼ å›¾ç‰‡--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"avatar-uploader tailor_class"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-loading</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">action</span>=<span class="string">"/api/base/file/upload"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:show-file-list</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:on-progress</span>=<span class="string">"progressFile"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:on-success</span>=<span class="string">"saveFileList"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-if</span>=<span class="string">"item_images"</span> <span class="attr">:src</span>=<span class="string">"item_images"</span> <span class="attr">class</span>=<span class="string">"avatar"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                                &lt;img v-if="item_images" class="avatar"&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">"el-icon-plus avatar-uploader-icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--å¼¹æ¡†--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-dialog</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:title</span>=<span class="string">"dialogTitle"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:visible.sync</span>=<span class="string">"dialogVisible"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">"600px"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:before-close</span>=<span class="string">"cancelCropper"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"dialog_box"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"rc-cropper clearfix"</span> <span class="attr">v-if</span>=<span class="string">"item_images"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-if</span>=<span class="string">"item_images"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">id</span>=<span class="string">"img_id"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ref</span>=<span class="string">"canvasRef"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:src</span>=<span class="string">"item_images"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"avatar"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"preview_box"</span> <span class="attr">v-show</span>=<span class="string">"finalImg!=''"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"preview_word"</span>&gt;</span>é¢„è§ˆå›¾ç‰‡<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"preview_img_box"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"preview_img"</span> <span class="attr">:src</span>=<span class="string">"finalImg"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é™åˆ¶æ¯”ä¾‹--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"margin-top: 20px"</span> <span class="attr">v-show</span>=<span class="string">"item_images"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">v-model</span>=<span class="string">"cropProportionSelect"</span> <span class="attr">label</span>=<span class="string">"0"</span> <span class="attr">border</span> <span class="attr">size</span>=<span class="string">"medium"</span></span></span><br><span class="line"><span class="tag">        &gt;</span>ä¸é™åˆ¶æ¯”ä¾‹</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">v-model</span>=<span class="string">"cropProportionSelect"</span> <span class="attr">label</span>=<span class="string">"1"</span> <span class="attr">border</span> <span class="attr">size</span>=<span class="string">"medium"</span></span></span><br><span class="line"><span class="tag">        &gt;</span>2.35 ï¼š1</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">v-model</span>=<span class="string">"cropProportionSelect"</span> <span class="attr">label</span>=<span class="string">"2"</span> <span class="attr">border</span> <span class="attr">size</span>=<span class="string">"medium"</span></span></span><br><span class="line"><span class="tag">        &gt;</span>1 ï¼š1</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"footer"</span> <span class="attr">class</span>=<span class="string">"dialog-footer clearfix"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"sureCropper"</span>&gt;</span>ç¡® å®š<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">"float: right !important;margin-right: 10px"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">"cancelCropper"</span></span></span><br><span class="line"><span class="tag">        &gt;</span>å– æ¶ˆ</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">loading:<span class="literal">false</span>,</span><br><span class="line">item_images: <span class="string">''</span>,<span class="comment">//åŸå›¾</span></span><br><span class="line">finalImg: <span class="string">''</span>,<span class="comment">//å‰ªåˆ‡å›¾</span></span><br><span class="line">cropper: <span class="literal">null</span>,</span><br><span class="line">croppShow: <span class="literal">false</span>,<span class="comment">//å‰ªè£æ˜¯å¦æ˜¾ç¤º</span></span><br><span class="line">dialogTitle: <span class="string">'å‰ªè£å›¾ç‰‡'</span>,<span class="comment">//å¼¹æ¡†æ ‡é¢˜</span></span><br><span class="line">dialogVisible: <span class="literal">false</span>,<span class="comment">//å¼¹æ¡†æ˜¾ç¤ºçŠ¶æ€</span></span><br><span class="line">cropProportionSelect: <span class="string">'0'</span>,<span class="comment">//è£å‰ªæ¡†æ¯”ä¾‹é€‰æ‹©</span></span><br><span class="line">cropProportion: <span class="string">''</span>,<span class="comment">//å‰ªè£æ¡†æ¯”ä¾‹</span></span><br><span class="line">x: <span class="number">0</span>,</span><br><span class="line">y: <span class="number">0</span>,</span><br><span class="line">width: <span class="number">0</span>,</span><br><span class="line">height: <span class="number">0</span>,</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">cropProportionSelect(nv, ov) &#123;</span><br><span class="line"><span class="keyword">this</span>.cropper.destroy();</span><br><span class="line"><span class="keyword">if</span> (nv == <span class="number">0</span> + <span class="string">''</span>) &#123;</span><br><span class="line"><span class="keyword">this</span>.cropProportion = <span class="literal">NaN</span>;</span><br><span class="line"><span class="keyword">this</span>.showCropper();</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (nv == <span class="number">1</span> + <span class="string">''</span>) &#123;</span><br><span class="line"><span class="keyword">this</span>.cropProportion =<span class="number">2.35</span>;</span><br><span class="line"><span class="keyword">this</span>.showCropper();</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (nv == <span class="number">2</span> + <span class="string">''</span>) &#123;</span><br><span class="line"><span class="keyword">this</span>.cropProportion = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">this</span>.showCropper();</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¸Šä¼ æ–‡ä»¶ä¸­</span></span><br><span class="line">            progressFile() &#123;</span><br><span class="line">                <span class="keyword">this</span>.item_images = <span class="string">''</span>;</span><br><span class="line">                <span class="keyword">this</span>.finalImg = <span class="string">''</span>;</span><br><span class="line">                <span class="keyword">this</span>.loading = <span class="literal">true</span>;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//å›¾ç‰‡ä¸Šä¼ </span></span><br><span class="line">            saveFileList(response, file, fileList) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(file)</span><br><span class="line">                <span class="keyword">this</span>.item_images = file.response.data;</span><br><span class="line">                <span class="keyword">this</span>.loading = <span class="literal">false</span>;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"item_images:"</span> + <span class="built_in">JSON</span>.stringify(<span class="keyword">this</span>.item_images));</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.item_images != <span class="string">''</span>) &#123;</span><br><span class="line">                    <span class="keyword">this</span>.dialogVisible = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">this</span>.showCropper();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//å‰ªè£æ¡†æ¸²æŸ“</span></span><br><span class="line">            showCropper() &#123;</span><br><span class="line">                <span class="keyword">let</span> that = <span class="keyword">this</span>;</span><br><span class="line">                <span class="keyword">this</span>.croppShow = <span class="literal">true</span></span><br><span class="line">                setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"img_id"</span>)</span><br><span class="line">                    <span class="keyword">let</span> cropper = <span class="keyword">new</span> Cropper(canvas, &#123;</span><br><span class="line">                        <span class="comment">// initialAspectRatio: 1 / 1,//è£å‰ªæ¡†å®½é«˜æ¯”çš„åˆå§‹å€¼ é»˜è®¤ä¸å›¾ç‰‡å®½é«˜æ¯”ç›¸åŒ åªæœ‰åœ¨aspectRatioæ²¡æœ‰è®¾ç½®çš„æƒ…å†µä¸‹å¯ç”¨</span></span><br><span class="line">                        aspectRatio: that.cropProportion,<span class="comment">//è®¾ç½®è£å‰ªæ¡†ä¸ºå›ºå®šçš„å®½é«˜æ¯”</span></span><br><span class="line">                        minContainerHeight: <span class="number">200</span>,<span class="comment">//å®¹å™¨æœ€å°é«˜åº¦</span></span><br><span class="line">                        autoCropArea: <span class="number">0.6</span>,<span class="comment">//å®šä¹‰è‡ªåŠ¨è£å‰ªåŒºåŸŸå¤§å°ï¼ˆç™¾åˆ†æ¯”ï¼‰</span></span><br><span class="line">                        <span class="comment">// zoomable:false,//ä¸ç¼©æ”¾å›¾ç‰‡</span></span><br><span class="line">                        <span class="comment">// zoomOnWheel:false,//æ»šåŠ¨é¼ æ ‡ç¼©æ”¾</span></span><br><span class="line">                        background: <span class="literal">false</span>,<span class="comment">//èƒŒæ™¯ç½‘æ ¼</span></span><br><span class="line">                        guides: <span class="literal">false</span>,<span class="comment">//è£å‰ªæ¡†è™šçº¿</span></span><br><span class="line">                        viewMode: <span class="number">1</span>,<span class="comment">//è£å‰ªæ¡†ä¸è¶…å‡ºå›¾ç‰‡</span></span><br><span class="line">                        dragMode: <span class="string">'none'</span>,</span><br><span class="line">                        crop(event) &#123;</span><br><span class="line">                            <span class="comment">// console.log(event.detail.x);</span></span><br><span class="line">                            <span class="comment">// console.log(event.detail.y);</span></span><br><span class="line">                            <span class="comment">// console.log(event.detail.width);</span></span><br><span class="line">                            <span class="comment">// console.log(event.detail.height);</span></span><br><span class="line">                            <span class="comment">// console.log(event.detail.rotate);</span></span><br><span class="line">                            <span class="comment">// console.log(event.detail.scaleX);</span></span><br><span class="line">                            <span class="comment">// console.log(event.detail.scaleY);</span></span><br><span class="line">                            that.x = <span class="built_in">parseInt</span>(event.detail.x)</span><br><span class="line">                            that.y = <span class="built_in">parseInt</span>(event.detail.y)</span><br><span class="line">                            that.width = <span class="built_in">parseInt</span>(event.detail.width)</span><br><span class="line">                            that.height = <span class="built_in">parseInt</span>(event.detail.height)</span><br><span class="line">                            <span class="comment">// that.finalImg=that.item_images+`?x-oss-process=image/crop,x_$&#123;event.detail.x&#125;,y_$&#123;event.detail.y&#125;,w_$&#123;event.detail.width&#125;,h_$&#123;event.detail.height&#125;`</span></span><br><span class="line">                            that.finalImg = that.item_images + <span class="string">`?x-oss-process=image/crop,x_<span class="subst">$&#123;that.x&#125;</span>,y_<span class="subst">$&#123;that.y&#125;</span>,w_<span class="subst">$&#123;that.width&#125;</span>,h_<span class="subst">$&#123;that.height&#125;</span>`</span></span><br><span class="line">                            <span class="comment">// console.log(that.finalImg)</span></span><br><span class="line">                        &#125;,</span><br><span class="line"></span><br><span class="line">                    &#125;)</span><br><span class="line">                    <span class="keyword">this</span>.cropper = cropper</span><br><span class="line">                &#125;, <span class="number">10</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// ç¡®è®¤è£å‰ª</span></span><br><span class="line">            sureCropper() &#123;</span><br><span class="line">                <span class="keyword">let</span> obj = &#123;</span><br><span class="line">                    image_url: <span class="keyword">this</span>.item_images,</span><br><span class="line">                    image_cutting_url: <span class="keyword">this</span>.finalImg,</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">this</span>.$http.post(<span class="string">"/api/manager/image/cutting"</span>, obj).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> data = res.data.data;</span><br><span class="line">                    <span class="keyword">this</span>.dialogVisible = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">this</span>.croppShow = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">this</span>.item_images = <span class="keyword">this</span>.finalImg;</span><br><span class="line">                    <span class="keyword">this</span>.loadList();</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// é”€æ¯è£å‰ªæ¡†</span></span><br><span class="line">            cancelCropper() &#123;</span><br><span class="line">                <span class="keyword">this</span>.dialogVisible = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">this</span>.cropper.destroy()</span><br><span class="line">                <span class="keyword">this</span>.croppShow = <span class="literal">false</span></span><br><span class="line">                <span class="keyword">this</span>.cropper = <span class="literal">null</span></span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="cropper-é™„å½•"><a href="#cropper-é™„å½•" class="headerlink" title="cropper é™„å½•"></a><strong>cropper é™„å½•</strong></h3><p>åœ°å€: <a href="https://github.com/fengyuanchen/cropperjs#mincontainerheight" target="_blank" rel="noopener">gitHub åœ°å€</a></p>
<blockquote>
<p>ç®€å•ç¿»è¯‘æ–‡æ¡£</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">## é…ç½®å¯¹è±¡</span><br><span class="line">&gt; https:&#x2F;&#x2F;github.com&#x2F;fengyuanchen&#x2F;cropperjs</span><br><span class="line">__æ³¨æ„ï¼šç¬¬ä¸€ä¸ªå€¼ä¸ºé»˜è®¤å€¼__</span><br><span class="line"></span><br><span class="line">- viewMode è§†å›¾æ§åˆ¶</span><br><span class="line">    - 0 æ— é™åˆ¶</span><br><span class="line">    - 1 é™åˆ¶è£å‰ªæ¡†ä¸èƒ½è¶…å‡ºå›¾ç‰‡çš„èŒƒå›´</span><br><span class="line">    - 2 é™åˆ¶è£å‰ªæ¡†ä¸èƒ½è¶…å‡ºå›¾ç‰‡çš„èŒƒå›´ ä¸”å›¾ç‰‡å¡«å……æ¨¡å¼ä¸º cover æœ€é•¿è¾¹å¡«å……</span><br><span class="line">    - 3 é™åˆ¶è£å‰ªæ¡†ä¸èƒ½è¶…å‡ºå›¾ç‰‡çš„èŒƒå›´ ä¸”å›¾ç‰‡å¡«å……æ¨¡å¼ä¸º contain æœ€çŸ­è¾¹å¡«å……</span><br><span class="line">- dragMode æ‹–æ‹½å›¾ç‰‡æ¨¡å¼</span><br><span class="line">    - crop å½¢æˆæ–°çš„è£å‰ªæ¡†</span><br><span class="line">    - move å›¾ç‰‡å¯ç§»åŠ¨</span><br><span class="line">    - none ä»€ä¹ˆä¹Ÿæ²¡æœ‰</span><br><span class="line">- initialAspectRatio è£å‰ªæ¡†å®½é«˜æ¯”çš„åˆå§‹å€¼ é»˜è®¤ä¸å›¾ç‰‡å®½é«˜æ¯”ç›¸åŒ åªæœ‰åœ¨aspectRatioæ²¡æœ‰è®¾ç½®çš„æƒ…å†µä¸‹å¯ç”¨</span><br><span class="line">- aspectRatio è®¾ç½®è£å‰ªæ¡†ä¸ºå›ºå®šçš„å®½é«˜æ¯”</span><br><span class="line">- data ä¹‹å‰å­˜å‚¨çš„è£å‰ªåçš„æ•°æ® åœ¨åˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨è®¾ç½® åªæœ‰åœ¨autoCropè®¾ç½®ä¸ºtrueæ—¶å¯ç”¨</span><br><span class="line">- preview é¢„è§ˆ è®¾ç½®ä¸€ä¸ªåŒºåŸŸå®¹å™¨é¢„è§ˆè£å‰ªåçš„ç»“æœ</span><br><span class="line">    - Element, Array (elements), NodeList or String (selector)</span><br><span class="line">- responsive åœ¨çª—å£å°ºå¯¸è°ƒæ•´å è¿›è¡Œå“åº”å¼çš„é‡æ¸²æŸ“ é»˜è®¤true</span><br><span class="line">- restore åœ¨çª—å£å°ºå¯¸è°ƒæ•´å æ¢å¤è¢«è£å‰ªçš„åŒºåŸŸ é»˜è®¤true</span><br><span class="line">- checkCrossOrigin æ£€æŸ¥å›¾ç‰‡æ˜¯å¦è·¨åŸŸ é»˜è®¤true å¦‚æœæ˜¯ ä¼šåœ¨è¢«å¤åˆ¶çš„å›¾ç‰‡å…ƒç´ ä¸ŠåŠ ä¸Šå±æ€§crossOrigin å¹¶ä¸”åœ¨srcä¸ŠåŠ ä¸Šä¸€ä¸ªæ—¶é—´æˆ³ é¿å…é‡åŠ è½½å›¾ç‰‡æ—¶å› ä¸ºæµè§ˆå™¨ç¼“å­˜è€ŒåŠ è½½é”™è¯¯</span><br><span class="line">- checkOrientation æ£€æŸ¥å›¾ç‰‡çš„æ–¹å‘ä¿¡æ¯ï¼ˆä»…JPEGå›¾ç‰‡æœ‰ï¼‰é»˜è®¤true åœ¨æ—‹è½¬å›¾ç‰‡æ—¶ä¼šå¯¹å›¾ç‰‡æ–¹å‘å€¼åšä¸€äº›å¤„ç† ä»¥è§£å†³IOSè®¾å¤‡ä¸Šçš„ä¸€äº›é—®é¢˜</span><br><span class="line">- modal æ˜¯å¦æ˜¾ç¤ºå›¾ç‰‡å’Œè£å‰ªæ¡†ä¹‹é—´çš„é»‘è‰²è’™ç‰ˆ é»˜è®¤true</span><br><span class="line">- guides æ˜¯å¦æ˜¾ç¤ºè£å‰ªæ¡†çš„è™šçº¿ é»˜è®¤true</span><br><span class="line">- center æ˜¯å¦æ˜¾ç¤ºè£å‰ªæ¡†ä¸­é—´çš„ â€˜+â€™ æŒ‡ç¤ºå™¨ é»˜è®¤true</span><br><span class="line">- highlight æ˜¯å¦æ˜¾ç¤ºè£å‰ªæ¡†ä¸Šé¢çš„ç™½è‰²è’™ç‰ˆ ï¼ˆå¾ˆæ·¡ï¼‰é»˜è®¤true</span><br><span class="line">- background æ˜¯å¦åœ¨å®¹å™¨å†…æ˜¾ç¤ºç½‘æ ¼çŠ¶çš„èƒŒæ™¯ é»˜è®¤true</span><br><span class="line">- autoCrop å…è®¸åˆå§‹åŒ–æ—¶è‡ªåŠ¨çš„è£å‰ªå›¾ç‰‡ é…åˆ data ä½¿ç”¨ é»˜è®¤true</span><br><span class="line">- autoCropArea è®¾ç½®è£å‰ªåŒºåŸŸå å›¾ç‰‡çš„å¤§å° å€¼ä¸º 0-1 é»˜è®¤ 0.8 è¡¨ç¤º 80%çš„åŒºåŸŸ</span><br><span class="line">- movable æ˜¯å¦å¯ä»¥ç§»åŠ¨å›¾ç‰‡ é»˜è®¤true</span><br><span class="line">- rotatable æ˜¯å¦å¯ä»¥æ—‹è½¬å›¾ç‰‡ é»˜è®¤true</span><br><span class="line">- scalable æ˜¯å¦å¯ä»¥ç¼©æ”¾å›¾ç‰‡ï¼ˆå¯ä»¥æ”¹å˜é•¿å®½ï¼‰ é»˜è®¤true</span><br><span class="line">- zoomable æ˜¯å¦å¯ä»¥ç¼©æ”¾å›¾ç‰‡ï¼ˆæ”¹å˜ç„¦è·ï¼‰ é»˜è®¤true</span><br><span class="line">- zoomOnTouch æ˜¯å¦å¯ä»¥é€šè¿‡æ‹–æ‹½è§¦æ‘¸ç¼©æ”¾å›¾ç‰‡ é»˜è®¤true</span><br><span class="line">- zoomOnWheel æ˜¯å¦å¯ä»¥é€šè¿‡é¼ æ ‡æ»šè½®ç¼©æ”¾å›¾ç‰‡ é»˜è®¤true</span><br><span class="line">- wheelZoomRatio è®¾ç½®é¼ æ ‡æ»šè½®ç¼©æ”¾çš„çµæ•åº¦ é»˜è®¤ 0.1</span><br><span class="line">- cropBoxMovable æ˜¯å¦å¯ä»¥æ‹–æ‹½è£å‰ªæ¡† é»˜è®¤true</span><br><span class="line">- cropBoxResizable æ˜¯å¦å¯ä»¥æ”¹å˜è£å‰ªæ¡†çš„å°ºå¯¸ é»˜è®¤true</span><br><span class="line">- toggleDragModeOnDblclick æ˜¯å¦å¯ä»¥é€šè¿‡åŒå‡»åˆ‡æ¢æ‹–æ‹½å›¾ç‰‡æ¨¡å¼ï¼ˆmoveå’Œcropï¼‰é»˜è®¤true å½“æ‹–æ‹½å›¾ç‰‡æ¨¡å¼ä¸ºnoneæ—¶ä¸å¯åˆ‡æ¢ è¯¥è®¾ç½®å¿…é¡»æµè§ˆå™¨æ”¯æŒåŒå‡»äº‹ä»¶</span><br><span class="line">- minContainerWidthï¼ˆ200ï¼‰ã€minContainerHeightï¼ˆ100ï¼‰ã€minCanvasWidthï¼ˆ0ï¼‰ã€minCanvasHeightï¼ˆ0ï¼‰ã€minCropBoxWidthï¼ˆ0ï¼‰ã€minCropBoxHeightï¼ˆ0ï¼‰ å®¹å™¨ã€å›¾ç‰‡ã€è£å‰ªæ¡†çš„ æœ€å°å®½é«˜ æ‹¬å·å†…ä¸ºé»˜è®¤å€¼ æ³¨æ„ è£å‰ªæ¡†çš„æœ€å°é«˜å®½æ˜¯ç›¸å¯¹ä¸é¡µé¢è€Œè¨€çš„ å¹¶éç›¸å¯¹å›¾ç‰‡</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## æ–¹æ³•</span><br><span class="line">__æ³¨æ„ï¼šå¦‚æœæ–¹æ³•æ²¡æœ‰è¢«è®¾ç½®è¿”å›ä»»ä½•å€¼ï¼Œé‚£ä¹ˆå®ƒä¼šè¿”å›ä¸€ä¸ªcropperçš„å®ä¾‹ å› æ­¤å¤šä¸ªæ–¹æ³•å¯ä»¥ä½¿ç”¨é“¾å¼å†™æ³•__</span><br><span class="line"></span><br><span class="line">- crop() æ‰‹åŠ¨æ˜¾ç¤ºè£å‰ªæ¡†</span><br><span class="line">- reset() é‡ç½®å›¾ç‰‡å’Œè£å‰ªæ¡†ä¸ºåˆå§‹çŠ¶æ€</span><br><span class="line">- replace(url[, hasSameSize]) æ›¿æ¢å›¾ç‰‡è·¯å¾„å¹¶ä¸”é‡å»ºè£å‰ªæ¡†</span><br><span class="line">    - url æ–°è·¯å¾„</span><br><span class="line">    - hasSameSize é»˜è®¤å€¼false è®¾ç½®ä¸ºtrueè¡¨ç¤ºæ–°è€å›¾ç‰‡å°ºå¯¸ä¸€æ · åªéœ€è¦æ›´æ¢è·¯å¾„æ— éœ€é‡å»ºè£å‰ªæ¡†</span><br><span class="line">- enable() è§£å†» è£å‰ªæ¡†</span><br><span class="line">- disable() å†»ç»“ è£å‰ªæ¡†</span><br><span class="line">- destroy() æ‘§æ¯è£å‰ªæ¡†å¹¶ä¸”ç§»é™¤cropperå®ä¾‹</span><br><span class="line">- move(offsetX[, offsetY]) ç§»åŠ¨å›¾ç‰‡æŒ‡å®šè·ç¦» ä¸€ä¸ªå‚æ•°ä»£è¡¨æ¨ªçºµå‘ç§»åŠ¨è·ç¦»ä¸€æ ·</span><br><span class="line">- moveTo(x[, y]) ç§»åŠ¨å›¾ç‰‡åˆ°ä¸€ä¸ªæŒ‡å®šçš„ç‚¹ ä¸€ä¸ªå‚æ•°ä»£è¡¨æ¨ªçºµå‘ç§»åŠ¨è·ç¦»ä¸€æ ·</span><br><span class="line">- zoom(ratio) ç¼©æ”¾ ratioå¤§äºé›¶æ˜¯æ”¾å¤§ å°äºé›¶ç¼©å°</span><br><span class="line">- zoomTo(ratio[, pivot]) ç¼©æ”¾å¹¶è®¾ç½®ä¸­å¿ƒç‚¹çš„ä½ç½®</span><br><span class="line">- rotate(degree) æ—‹è½¬ ç±»ä¼¼css</span><br><span class="line">- rotateTo(degree) æ—‹è½¬åˆ°ç»å¯¹è§’åº¦</span><br><span class="line">- scale(scaleX[, scaleY])ã€scaleX(scaleX)ã€scaleY(scaleY) ç¼©æ”¾ ä¸€ä¸ªå‚æ•°ä»£è¡¨æ¨ªçºµå‘ç¼©æ”¾å€¼ä¸€æ ·</span><br><span class="line">- getData([rounded]) è¿”å›è£å‰ªåŒºåŸŸåŸºäºåŸå›¾ç‰‡!åŸå°ºå¯¸!çš„ä½ç½®å’Œå°ºå¯¸ roundedé»˜è®¤ä¸ºfalse è¡¨ç¤ºæ˜¯å¦æ˜¾ç¤ºå››èˆäº”å…¥åçš„æ•°æ® æœ‰äº†è¿™äº›æ•°æ®å¯ä»¥ç›´æ¥åœ¨åŸå›¾ä¸Šè¿›è¡Œè£å‰ªæ˜¾ç¤º</span><br><span class="line">- setData(data) æ”¹å˜è£å‰ªåŒºåŸŸåŸºäºåŸå›¾çš„ä½ç½®å’Œå°ºå¯¸ ä»…å½“viewMode ä¸ä¸º0æ—¶æœ‰æ•ˆ</span><br><span class="line">- getContainerData()ã€getImageData()ã€getCanvasData()ã€setCanvasData(data)ã€getCropBoxData()ã€setCropBoxData(data) å®¹å™¨ã€å›¾ç‰‡å®¹å™¨ï¼ˆç”»å¸ƒï¼‰ã€å›¾ç‰‡ã€è£å‰ªåŒºåŸŸç›¸å¯¹å®¹å™¨çš„æ•°æ®è®¾ç½®å’Œè·å–</span><br><span class="line">- getCroppedCanvas([options]) å¾—åˆ°è¢«è£å‰ªå›¾ç‰‡çš„ä¸€ä¸ªcanvaså¯¹è±¡ optionsè®¾ç½®è¿™ä¸ªcanvasçš„ä¸€äº›æ•°æ®</span><br><span class="line">    - widthã€heightã€minWidthã€minHeightã€maxWidthã€maxHeightã€fillColorã€imageSmoothingEnabledï¼ˆå›¾ç‰‡æ˜¯å¦æ˜¯å…‰æ»‘çš„ é»˜è®¤trueï¼‰ã€imageSmoothingQualityï¼ˆå›¾ç‰‡çš„è´¨é‡ é»˜è®¤low è¿˜æœ‰mediumã€highï¼‰</span><br><span class="line">- setAspectRatio(aspectRatio) æ”¹å˜è£å‰ªåŒºåŸŸçš„å®½é«˜æ¯”</span><br><span class="line">- setDragMode([mode]) è®¾ç½®æ‹–æ‹½å›¾ç‰‡æ¨¡å¼</span><br><span class="line"></span><br><span class="line">## äº‹ä»¶</span><br><span class="line">- ready æ¸²æŸ“å‰ï¼ˆå›¾ç‰‡å·²ç»è¢«åŠ è½½ã€cropperå®ä¾‹å·²ç»å‡†å¤‡å®Œæ¯•ï¼‰çš„å‡†å¤‡å·¥ä½œäº‹ä»¶</span><br><span class="line">- cropstartã€cropmoveã€cropendã€crop å¼€å§‹ç”»è£å‰ªæ¡†ï¼ˆæˆ–ç”»å¸ƒï¼‰ã€ç”»è£å‰ªæ¡†ï¼ˆæˆ–ç”»å¸ƒï¼‰çš„ä¸­é€”ã€è£å‰ªæ¡†ï¼ˆæˆ–ç”»å¸ƒï¼‰ç”»å®Œã€è¿›è¡Œè£å‰ªäº‹ä»¶ event.detail.originalEventã€event.detail.action</span><br><span class="line">    - å½“autoCropä¸ºtrue cropäº‹ä»¶ä¼šåœ¨readyä¹‹å‰è§¦å‘</span><br><span class="line">- zoom è£å‰ªæ¡†ç¼©æ”¾äº‹ä»¶</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vueç»„ä»¶</category>
      </categories>
      <tags>
        <tag>vue,js</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‹–æ‹½æ’åº</title>
    <url>/2020/07/14/%E6%8B%96%E6%8B%BD%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[<h3 id="åŸºç¡€ä½¿ç”¨"><a href="#åŸºç¡€ä½¿ç”¨" class="headerlink" title="åŸºç¡€ä½¿ç”¨"></a><strong>åŸºç¡€ä½¿ç”¨</strong></h3><blockquote>
<p>å®‰è£…å¼•ç”¨</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">cnpm install awe-dnd --save</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä½¿ç”¨</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">åœ¨main.jsä¸­å…¨å±€å¼•ç”¨;</span><br><span class="line"><span class="keyword">import</span> VueDND <span class="keyword">from</span> <span class="string">"awe-dnd"</span>;</span><br><span class="line">Vue.use(VueDND);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">"color-item"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">"color in colors"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-dragging</span>=<span class="string">"&#123; item: color, list: colors, group: 'color' &#125;"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">"color.text"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  &#123;&#123;color.text&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">mounted () &#123;</span><br><span class="line">   <span class="keyword">this</span>.$dragging.$on(<span class="string">'dragged'</span>, (&#123; value &#125;) =&gt; &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(value.item)</span><br><span class="line">     <span class="built_in">console</span>.log(value.list)</span><br><span class="line">     <span class="built_in">console</span>.log(value.otherData)</span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="keyword">this</span>.$dragging.$on(<span class="string">'dragend'</span>, () =&gt; &#123;</span><br><span class="line"></span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="åµŒå¥—åˆ—è¡¨æ’åº"><a href="#åµŒå¥—åˆ—è¡¨æ’åº" class="headerlink" title="åµŒå¥—åˆ—è¡¨æ’åº"></a><strong>åµŒå¥—åˆ—è¡¨æ’åº</strong></h3><p>åªæœ‰åœ¨htmlè¿™ä¸ªåœ°æ–¹æœ‰åŒºåˆ«ï¼Œå…¶ä»–ä½¿ç”¨å‡ç›¸åŒ</p>
<blockquote>
<p>ä½¿ç”¨</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">"select"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">"(item2,index2) in item.volunteerMajor"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">"index2"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-dragging</span>=<span class="string">"&#123; item: item2, list: item.volunteerMajor, group: 'name'+index&#125;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vueç»„ä»¶</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>çŸ­ä¿¡éªŒè¯</title>
    <url>/2020/07/15/%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81/</url>
    <content><![CDATA[<blockquote>
<p>éªŒè¯ç æ¸²æŸ“</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"get_code"</span> @<span class="attr">click</span>=<span class="string">"getCode"</span>&gt;</span>&#123;&#123;codeDes&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å®šä¹‰å˜é‡</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> isClick = <span class="number">0</span>;<span class="comment">//é˜²è¿å‡»</span></span><br><span class="line"><span class="keyword">let</span> timeOut = <span class="number">60</span>;</span><br><span class="line">codeDes: <span class="string">'è·å–éªŒè¯ç '</span>,<span class="comment">//éªŒè¯ç æè¿°</span></span><br><span class="line">codeNum: <span class="number">60</span>,<span class="comment">//éªŒè¯ç æ—¶é—´</span></span><br><span class="line">userphone: <span class="string">''</span>,</span><br><span class="line">usercode: <span class="string">''</span>,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è·å–éªŒè¯ç </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç‚¹å‡»è·å–éªŒè¯ç å€’è®¡æ—¶</span></span><br><span class="line">          getCodeNum() &#123;</span><br><span class="line">              <span class="keyword">let</span> timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                  <span class="keyword">this</span>.codeNum--;</span><br><span class="line">                  <span class="keyword">if</span> (<span class="keyword">this</span>.codeNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                      <span class="keyword">this</span>.codeDes = <span class="string">"é‡æ–°è·å–éªŒè¯ç "</span>;</span><br><span class="line">                      isClick = <span class="number">0</span>;</span><br><span class="line">                      <span class="keyword">this</span>.codeNum = timeOut;</span><br><span class="line">                      clearInterval(timer);</span><br><span class="line">                  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                      <span class="keyword">this</span>.codeDes = <span class="keyword">this</span>.codeNum + <span class="string">"ç§’"</span>;</span><br><span class="line">                      isClick = <span class="number">1</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;, <span class="number">1000</span>);</span><br><span class="line">          &#125;,</span><br><span class="line"></span><br><span class="line">          <span class="comment">//è·å–éªŒè¯ç </span></span><br><span class="line">          getCode() &#123;</span><br><span class="line">              <span class="keyword">if</span> (<span class="keyword">this</span>.userphone == <span class="string">''</span>) &#123;</span><br><span class="line">                  vant.Toast(<span class="string">'æ‰‹æœºå·ä¸èƒ½ä¸ºç©ºï¼'</span>);</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="keyword">if</span> (isClick == <span class="number">0</span>) &#123;</span><br><span class="line">                      isClick = <span class="number">1</span>;</span><br><span class="line">                      <span class="keyword">this</span>.getCodeNum();</span><br><span class="line">                      <span class="keyword">let</span> obj = &#123;</span><br><span class="line">                          mobile: <span class="keyword">this</span>.userphone,</span><br><span class="line">                          action: <span class="string">"send_code"</span>,</span><br><span class="line">                      &#125;</span><br><span class="line">                      Ajax(<span class="string">'get'</span>, <span class="string">'/api'</span>, obj).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                          isClick = <span class="number">0</span>;</span><br><span class="line">                      &#125;)</span><br><span class="line">                  &#125;</span><br><span class="line"></span><br><span class="line">              &#125;</span><br><span class="line">          &#125;,</span><br><span class="line"></span><br><span class="line">          <span class="comment">//ç¡®è®¤</span></span><br><span class="line">          addNewUser() &#123;</span><br><span class="line">              <span class="keyword">if</span> (<span class="keyword">this</span>.userphone == <span class="string">''</span>) &#123;</span><br><span class="line">                  vant.Toast(<span class="string">'æ‰‹æœºå·ä¸èƒ½ä¸ºç©ºï¼'</span>);</span><br><span class="line">              &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.usercode == <span class="string">''</span>) &#123;</span><br><span class="line">                  vant.Toast(<span class="string">'éªŒè¯ç ä¸èƒ½ä¸ºç©ºï¼'</span>);</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="keyword">let</span> obj = &#123;</span><br><span class="line">                      mobile: <span class="keyword">this</span>.userphone,</span><br><span class="line">                      action: <span class="string">'check_code'</span>,</span><br><span class="line">                      code: <span class="keyword">this</span>.usercode,</span><br><span class="line">                  &#125;</span><br><span class="line">                  Ajax(<span class="string">'get'</span>, <span class="string">'/api'</span>, obj).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">                  &#125;)</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">          &#125;,</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å¸¸ç”¨å·¥å…·</category>
      </categories>
      <tags>
        <tag>js,html</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸‹æ‹‰åˆ†é¡µ</title>
    <url>/2020/07/15/%E4%B8%8B%E6%8B%89%E5%88%86%E9%A1%B5/</url>
    <content><![CDATA[<blockquote>
<p>å®šä¹‰å˜é‡</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">allLIst:[],<span class="comment">//åˆ—è¡¨æ•°æ®</span></span><br><span class="line">page:<span class="number">0</span>,</span><br><span class="line">loadNextPage:<span class="literal">true</span>,<span class="comment">//æ˜¯å¦è¯·æ±‚ä¸‹ä¸€é¡µ</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨ mounted é‡Œé¢ç›‘å¬åˆ†é¡µæ»šåŠ¨æ¡</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ†é¡µç›‘å¬æ»šåŠ¨æ¡</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">"scroll"</span>, <span class="keyword">this</span>.handleScroll);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨ methods é‡Œé¢å†™ handleScroll æ–¹æ³•</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ†é¡µâ€”â€”æ»šåŠ¨æ¡è§¦ç¢°åˆ°åº•éƒ¨</span></span><br><span class="line">handleScroll() &#123;</span><br><span class="line">    <span class="keyword">let</span> scrollTop = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­ å¦‚æœæ–‡æ¡£çš„è·ç¦»å‡200å°äºÂ  å±å¹•å¯è§†è·ç¦»Â  åŠ ä¸ŠÂ  æ»šåŠ¨æ¡è·ç¦»é¡¶éƒ¨çš„è·ç¦»ï¼Œå¹¶ä¸”Â loadNextPageä¸ºtrue ï¼Œåˆ™page++ï¼›</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.documentElement.scrollHeight - <span class="number">200</span> &lt; <span class="built_in">document</span>.documentElement.clientHeight + scrollTop) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.loadNextPage) &#123;</span><br><span class="line">            <span class="comment">// console.log("ä¸‹ä¸€é¡µ");</span></span><br><span class="line">            <span class="keyword">this</span>.loadNextPage = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">this</span>.page++;</span><br><span class="line">            <span class="keyword">this</span>.getArticle();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¯·æ±‚æ•°æ®åˆ—è¡¨ä¹‹åç»™å˜é‡ list èµ‹å€¼</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¯·æ±‚æ•°æ®åˆ—è¡¨</span></span><br><span class="line">getList() &#123;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">page: <span class="keyword">this</span>.page,</span><br><span class="line">size: <span class="number">10</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">this</span>.$http.post(<span class="string">"/api/total/list"</span>, obj).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//åˆ†é¡µè¿›å…¥ä¸‹ä¸€é¡µ</span></span><br><span class="line"><span class="keyword">let</span> data = res.data.result.data;</span><br><span class="line"><span class="comment">//åˆ¤æ–­ å¦‚æœæ•°æ®ä¸ªæ•°å°äº10ï¼Œä¸è¿›å…¥ä¸‹ä¸€é¡µï¼Œå¦åˆ™loadNextPageè®¾ä¸ºtrueè¿›å…¥ä¸‹ä¸€é¡µ</span></span><br><span class="line">data.length &lt; <span class="number">10</span> ? <span class="keyword">this</span>.loadNextPage = <span class="literal">false</span> : <span class="keyword">this</span>.loadNextPage = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">//åˆ†é¡µè¿æ¥æ•°ç»„</span></span><br><span class="line"><span class="keyword">this</span>.allList = [...this.allList, ...data];</span><br><span class="line"><span class="comment">// console.log(JSON.stringify(this.allList));</span></span><br><span class="line">&#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å¸¸ç”¨å·¥å…·</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸¸ç”¨åŠŸèƒ½-js</title>
    <url>/2020/07/15/js%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<h3 id="ç‚¹å‡»å¤åˆ¶æ–‡æœ¬"><a href="#ç‚¹å‡»å¤åˆ¶æ–‡æœ¬" class="headerlink" title="ç‚¹å‡»å¤åˆ¶æ–‡æœ¬"></a><strong>ç‚¹å‡»å¤åˆ¶æ–‡æœ¬</strong></h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> httpUrl = <span class="keyword">this</span>.herfAddress; <span class="comment">//æ­¤å¤„ä¸ºéœ€è¦è¢«å¤åˆ¶çš„æ–‡æœ¬</span></span><br><span class="line"><span class="keyword">let</span> oInput = <span class="built_in">document</span>.createElement(<span class="string">"input"</span>);</span><br><span class="line">oInput.value = httpUrl;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(oInput);</span><br><span class="line">oInput.select(); <span class="comment">// é€‰æ‹©å¯¹è±¡</span></span><br><span class="line"><span class="built_in">document</span>.execCommand(<span class="string">"Copy"</span>); <span class="comment">// æ‰§è¡Œæµè§ˆå™¨å¤åˆ¶å‘½ä»¤</span></span><br><span class="line">oInput.className = <span class="string">"oInput"</span>;</span><br><span class="line">oInput.style.display = <span class="string">"none"</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"é“¾æ¥å¤åˆ¶æˆåŠŸ"</span>);</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ç¦æ­¢å¾®ä¿¡ç”¨æˆ·ä¿®æ”¹å­—ä½“å¤§å°"><a href="#ç¦æ­¢å¾®ä¿¡ç”¨æˆ·ä¿®æ”¹å­—ä½“å¤§å°" class="headerlink" title="ç¦æ­¢å¾®ä¿¡ç”¨æˆ·ä¿®æ”¹å­—ä½“å¤§å°"></a><strong>ç¦æ­¢å¾®ä¿¡ç”¨æˆ·ä¿®æ”¹å­—ä½“å¤§å°</strong></h3><p>å¾®ä¿¡ webview å†…ç½®äº†è°ƒæ•´å­—ä½“å¤§å°çš„åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´ã€‚</p>
<blockquote>
<p>1ã€android æ‰‹æœº</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">       (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">           <span class="keyword">if</span> (<span class="keyword">typeof</span> WeixinJSBridge == <span class="string">"object"</span> &amp;&amp; <span class="keyword">typeof</span> WeixinJSBridge.invoke == <span class="string">"function"</span>) &#123;</span><br><span class="line">               handleFontSize();</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="keyword">if</span> (<span class="built_in">document</span>.addEventListener) &#123;</span><br><span class="line">                   <span class="built_in">document</span>.addEventListener(<span class="string">"WeixinJSBridgeReady"</span>, handleFontSize, <span class="literal">false</span>);</span><br><span class="line">               &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.attachEvent) &#123;</span><br><span class="line">                   <span class="built_in">document</span>.attachEvent(<span class="string">"WeixinJSBridgeReady"</span>, handleFontSize);</span><br><span class="line">                   <span class="built_in">document</span>.attachEvent(<span class="string">"onWeixinJSBridgeReady"</span>, handleFontSize);  &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="function"><span class="keyword">function</span> <span class="title">handleFontSize</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">               <span class="comment">// è®¾ç½®ç½‘é¡µå­—ä½“ä¸ºé»˜è®¤å¤§å°</span></span><br><span class="line">               WeixinJSBridge.invoke(<span class="string">'setFontSizeCallback'</span>, &#123; <span class="string">'fontSize'</span> : <span class="number">0</span> &#125;);</span><br><span class="line">               <span class="comment">// é‡å†™è®¾ç½®ç½‘é¡µå­—ä½“å¤§å°çš„äº‹ä»¶</span></span><br><span class="line">               WeixinJSBridge.on(<span class="string">'menu:setfont'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                   WeixinJSBridge.invoke(<span class="string">'setFontSizeCallback'</span>, &#123; <span class="string">'fontSize'</span> : <span class="number">0</span> &#125;);</span><br><span class="line">               &#125;);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)();</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>2ã€IOS</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="comment">/* IOSç¦æ­¢å¾®ä¿¡è°ƒæ•´å­—ä½“å¤§å° */</span></span><br><span class="line">  <span class="attribute">-webkit-text-size-adjust</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">text-size-adjust</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">-moz-text-size-adjust</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="px-ä¸-rem-æ¢ç®—"><a href="#px-ä¸-rem-æ¢ç®—" class="headerlink" title="px ä¸ rem æ¢ç®—"></a><strong>px ä¸ rem æ¢ç®—</strong></h3><p>rem æ˜¯æ ¹æ® iPhone6 æ¢ç®—çš„ï¼Œæ ¹æ®è®¾è®¡å‡ºçš„ px å°ºå¯¸é™¤ä»¥ 100 å¸¦ä¸Š rem å•ä½å³å¯ï¼Œå¹³å¸¸ 14px æ¢ç®—æˆ rem æ˜¯ 0.28rem</p>
<blockquote>
<p>1ã€åœ¨ style.js é‡Œé¢å¼•ç”¨</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//remæ¢ç®—</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">doc, win</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> docEl = doc.documentElement,</span><br><span class="line">    resizeEvt = <span class="string">"orientationchange"</span> <span class="keyword">in</span> <span class="built_in">window</span> ? <span class="string">"orientationchange"</span> : <span class="string">"resize"</span>,</span><br><span class="line">    recalc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> clientWidth = docEl.clientWidth;</span><br><span class="line">      <span class="keyword">if</span> (!clientWidth) <span class="keyword">return</span>;</span><br><span class="line">      <span class="keyword">if</span> (clientWidth &gt;= <span class="number">750</span>) &#123;</span><br><span class="line">        docEl.style.fontSize = <span class="string">"100px"</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        docEl.style.fontSize = <span class="number">100</span> * (clientWidth / <span class="number">750</span>) + <span class="string">"px"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  <span class="keyword">if</span> (!doc.addEventListener) <span class="keyword">return</span>;</span><br><span class="line">  win.addEventListener(resizeEvt, recalc, <span class="literal">false</span>);</span><br><span class="line">  doc.addEventListener(<span class="string">"DOMContentLoaded"</span>, recalc, <span class="literal">false</span>);</span><br><span class="line">&#125;)(<span class="built_in">document</span>, <span class="built_in">window</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2ã€åœ¨ style.css é‡Œé¢</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: initial;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è·å–å’Œä¿®æ”¹ç½‘å€é“¾æ¥å‚æ•°"><a href="#è·å–å’Œä¿®æ”¹ç½‘å€é“¾æ¥å‚æ•°" class="headerlink" title="è·å–å’Œä¿®æ”¹ç½‘å€é“¾æ¥å‚æ•°"></a><strong>è·å–å’Œä¿®æ”¹ç½‘å€é“¾æ¥å‚æ•°</strong></h3><h4 id="è·å–å‚æ•°"><a href="#è·å–å‚æ•°" class="headerlink" title="è·å–å‚æ•°"></a><strong>è·å–å‚æ•°</strong></h4><h5 id="åŸç”Ÿ"><a href="#åŸç”Ÿ" class="headerlink" title="åŸç”Ÿ"></a><strong>åŸç”Ÿ</strong></h5><blockquote>
<p>1ã€å®šä¹‰æ–¹æ³•</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetQueryString</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|&amp;)"</span> + name + <span class="string">"=([^&amp;]*)(&amp;|$)"</span>);</span><br><span class="line">  <span class="keyword">var</span> r = <span class="built_in">window</span>.location.search.substr(<span class="number">1</span>).match(reg);</span><br><span class="line">  <span class="keyword">if</span> (r != <span class="literal">null</span>) <span class="keyword">return</span> <span class="built_in">unescape</span>(r[<span class="number">2</span>]);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2ã€ä½¿ç”¨</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a=GetQueryString(<span class="string">"name"</span>)ï¼›</span><br></pre></td></tr></table></figure>

<h5 id="vue"><a href="#vue" class="headerlink" title="vue"></a><strong>vue</strong></h5><blockquote>
<p>1ã€è·³è½¬é¡µé¢å¹¶ä¼ å‚</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">this</span>.$router.push(&#123;</span><br><span class="line">    path: <span class="string">'/PC/wish/fill/collegesPriority'</span>,</span><br><span class="line">    query: &#123;</span><br><span class="line">        filltype: <span class="string">''</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2ã€å–å‚</p>
</blockquote>
<p>å…¶ä¸­ â€˜filltypeâ€™ ä¸ºé“¾æ¥å‚æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">this</span>.$route.query.filltype</span><br></pre></td></tr></table></figure>



<h4 id="ä¿®æ”¹å‚æ•°"><a href="#ä¿®æ”¹å‚æ•°" class="headerlink" title="ä¿®æ”¹å‚æ•°"></a><strong>ä¿®æ”¹å‚æ•°</strong></h4><h5 id="ä¿®æ”¹é“¾æ¥åŠå‚æ•°"><a href="#ä¿®æ”¹é“¾æ¥åŠå‚æ•°" class="headerlink" title="ä¿®æ”¹é“¾æ¥åŠå‚æ•°"></a><strong>ä¿®æ”¹é“¾æ¥åŠå‚æ•°</strong></h5><p>*<em>/m/m_url_example *</em>æ˜¯ç›¸å¯¹é“¾æ¥ï¼Œ</p>
<p>æ­¤æ–¹æ³•æ˜¯ç›´æ¥æ›¿æ¢åŸŸååé¢çš„é“¾æ¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">history.replaceState(&#123;&#125;,&#39;&#39;, &#39;&#x2F;m&#x2F;m_url_example&#39;);</span><br></pre></td></tr></table></figure>

<h5 id="æ·»åŠ å‚æ•°"><a href="#æ·»åŠ å‚æ•°" class="headerlink" title="æ·»åŠ å‚æ•°"></a><strong>æ·»åŠ å‚æ•°</strong></h5><blockquote>
<p>1ã€å®šä¹‰æ–¹æ³•</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeURLArg</span>(<span class="params">url, arg, arg_val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> pattern = arg + <span class="string">"=([^&amp;]*)"</span>;</span><br><span class="line">  <span class="keyword">var</span> replaceText = arg + <span class="string">"="</span> + arg_val;</span><br><span class="line">  <span class="keyword">if</span> (url.match(pattern)) &#123;</span><br><span class="line">    <span class="keyword">var</span> tmp = <span class="string">"/("</span> + arg + <span class="string">"=)([^&amp;]*)/gi"</span>;</span><br><span class="line">    tmp = url.replace(<span class="built_in">eval</span>(tmp), replaceText);</span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (url.match(<span class="string">"[?]"</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> url + <span class="string">"&amp;"</span> + replaceText;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> url + <span class="string">"?"</span> + replaceText;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2ã€ä½¿ç”¨</p>
</blockquote>
<p>æ­¤æ–¹æ³•æ˜¯åœ¨å½“å‰é“¾æ¥åé¢è¿½åŠ å‚æ•° ï¼Œâ€œnameâ€ ä¸ºå‚æ•°åï¼Œâ€œ123â€ ä¸ºå€¼ã€‚</p>
<p>è‹¥è¿æ¥ä¸Šæ²¡æœ‰â€œnameâ€å‚æ•°ï¼Œåˆ™ä¼šæ·»åŠ è¿™ä¸ªå‚æ•°å¹¶èµ‹å€¼ï¼Œè‹¥é“¾æ¥æœ¬å°±æœ‰è¿™ä¸ªå‚æ•°ï¼Œåˆ™ä¼šå°†å€¼æ›¿æ¢ä¸ºâ€œ123â€ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.location.href = changeURLArg(<span class="built_in">window</span>.location.href, <span class="string">"name"</span>, <span class="number">123</span>);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å¸¸ç”¨æ–¹æ³•</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>è§†é¢‘æ’­æ”¾å™¨</title>
    <url>/2020/07/15/%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E5%99%A8/</url>
    <content><![CDATA[<blockquote>
<p>æ ·ä¾‹å±•ç¤º</p>
</blockquote>
<p><img src="https://s1.ax1x.com/2020/07/15/Ud8tc4.png" alt="æ’­æ”¾æ ·å¼"></p>
<h3 id="æ¸²æŸ“"><a href="#æ¸²æŸ“" class="headerlink" title="æ¸²æŸ“"></a><strong>æ¸²æŸ“</strong></h3><blockquote>
<p>åŒºåˆ† ios ä¸ Android</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"video_box wrap"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"video_cont"</span> <span class="attr">v-if</span>=<span class="string">"isiOS"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span></span></span><br><span class="line"><span class="tag">      <span class="attr">id</span>=<span class="string">"video"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"video_box"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">webkit-playsinline</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">x5-playsinline</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">      <span class="attr">x5-video-player-type</span>=<span class="string">"h5-page"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">x5-video-player-fullscreen</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">playsinline</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">poster</span>=<span class="string">"http://bendipin.oss-cn-beijing.aliyuncs.com/images/file-1554818270419.png"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">"http://video.jishiyoo.com/customerTrans/2d6d4561e207fdc5bae73662f6543bad/1f242163-169fc168513-0005-5026-102-f36a3.mp4"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">preload</span>=<span class="string">"none"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">x-webkit-airplay</span>=<span class="string">"allow"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">x5-video-orientation</span>=<span class="string">"portrait"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click</span>=<span class="string">"pauseVideo"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">loop</span>=<span class="string">"loop"</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"video_cont"</span> <span class="attr">v-if</span>=<span class="string">"!isiOS"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span></span></span><br><span class="line"><span class="tag">      <span class="attr">id</span>=<span class="string">"video"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"video_box"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">webkit-playsinline</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">x5-playsinline</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">      <span class="attr">playsinline</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">poster</span>=<span class="string">"http://bendipin.oss-cn-beijing.aliyuncs.com/images/file-1554818270419.png"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">"http://video.jishiyoo.com/customerTrans/2d6d4561e207fdc5bae73662f6543bad/1f242163-169fc168513-0005-5026-102-f36a3.mp4"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">preload</span>=<span class="string">"none"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">x-webkit-airplay</span>=<span class="string">"allow"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">x5-video-orientation</span>=<span class="string">"portrait"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">x5-video-player-type</span>=<span class="string">"h5-page"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click</span>=<span class="string">"pauseVideo"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">loop</span>=<span class="string">"loop"</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ h5 å¾®ä¿¡ç«¯å®ç°ä¸è·³è½¬å¾®ä¿¡æµè§ˆå™¨  ï¼Œåœ¨ android æœ‰æ•ˆ  x5-video-player-type=â€h5-pageâ€</p>
<h3 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a><strong>æ“ä½œ</strong></h3><blockquote>
<p>å…¨å±€å˜é‡</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> u = navigator.userAgent; <span class="comment">//åœ¨vueæ¸²æŸ“çš„ä¸Šé¢å®šä¹‰</span></span><br><span class="line">isiOS: !!u.match(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>), <span class="comment">// iosç»ˆç«¯</span></span><br><span class="line">playOrPause: <span class="literal">false</span>,<span class="comment">//æ˜¯å¦æ­£åœ¨æ’­æ”¾</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ’­æ”¾æ§åˆ¶</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">pauseVideo() &#123; <span class="comment">//æš‚åœ\æ’­æ”¾</span></span><br><span class="line"><span class="keyword">let</span> video = <span class="built_in">document</span>.getElementById(<span class="string">'video'</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>.playOrPause) &#123;</span><br><span class="line">    video.pause();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        video.play();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">this</span>.playOrPause = !<span class="keyword">this</span>.playOrPause</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>css</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrap</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.video_cont</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#video</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å¸¸ç”¨å·¥å…·</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼¹å¹•</title>
    <url>/2020/07/15/%E5%BC%B9%E5%B9%95/</url>
    <content><![CDATA[<p><a href="https://github.com/superhos/vue-baberrage#readme" target="_blank" rel="noopener">å¼¹å¹•æºç </a></p>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a><strong>ä½¿ç”¨</strong></h3><blockquote>
<p>1ã€å®‰è£…å¼•ç”¨</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">cnpm install vue-baberrage</span><br><span class="line"><span class="keyword">import</span> &#123; vueBaberrage &#125; <span class="keyword">from</span> <span class="string">'vue-baberrage'</span></span><br><span class="line">Vue.use(vueBaberrage)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2ã€html</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¼¹å¹•--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"barrages-drop"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">vue-baberrage</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:isShow</span>=<span class="string">"barrageIsShow"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:barrageList</span>=<span class="string">"barrageList"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:maxWordCount</span>=<span class="string">"maxWordCount"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:throttleGap</span>=<span class="string">"throttleGap"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:loop</span>=<span class="string">"barrageLoop"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:boxHeight</span>=<span class="string">"boxHeight"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:messageHeight</span>=<span class="string">"messageHeight"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:lanesCount</span>=<span class="string">"2"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">barrage-list-empty</span>=<span class="string">"getUserBuyList"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">vue-baberrage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>3ã€å˜é‡</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">this</span>.userBuyList = [</span><br><span class="line">  &#123; <span class="attr">avatar</span>: <span class="string">""</span>, <span class="attr">nickname</span>: <span class="string">"è¶…"</span> &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    avatar:</span><br><span class="line">      <span class="string">"http://thirdwx.qlogo.cn/mmopen/vi_32/eU2DIpM10gpXSfjr42QKtgTF3UatMA8uQNCTOfnl8b0bU6rhH3m619X8c0WfcZLuywPz685DjvlAvA2diaKLlfg/132"</span>,</span><br><span class="line">    nickname: <span class="string">"æ™“"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    avatar:</span><br><span class="line">      <span class="string">"http://thirdwx.qlogo.cn/mmopen/vi_32/eU2DIpM10gpXSfjr42QKtgTF3UatMA8uQNCTOfnl8b0bU6rhH3m619X8c0WfcZLuywPz685DjvlAvA2diaKLlfg/132"</span>,</span><br><span class="line">    nickname: <span class="string">"æ™“"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">avatar</span>: <span class="string">""</span>, <span class="attr">nickname</span>: <span class="string">"è¶…m"</span> &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<blockquote>
<p>4ã€js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*å¼¹å¹•</span></span><br><span class="line"><span class="comment">            * */</span></span><br><span class="line">            addToList() &#123;</span><br><span class="line">                <span class="keyword">this</span>.userBuyList.map(<span class="function">(<span class="params">v2, i2</span>) =&gt;</span> &#123;</span><br><span class="line">                    v2.userBuyId = i2;</span><br><span class="line">                    <span class="keyword">this</span>.barrageList.push(&#123;</span><br><span class="line">                        id: v2.userBuyId,</span><br><span class="line">                        avatar: v2.avatar,</span><br><span class="line">                        msg: v2.nickname + <span class="string">'å·²è´­ä¹°'</span>,</span><br><span class="line">                        time: <span class="number">4</span>,</span><br><span class="line">                        type: MESSAGE_TYPE.NORMAL,</span><br><span class="line">                        <span class="comment">// barrageStyle: v.barrageStyle</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="Plugin-Options"><a href="#Plugin-Options" class="headerlink" title="Plugin Options"></a><strong>Plugin Options</strong></h3><blockquote>
<p>1ã€isShow</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: &#96;true&#96;</span><br><span class="line">- Acceptable-Values: Boolean</span><br><span class="line">- Function: æ˜¯å¦æ˜¾ç¤ºå¼¹å¹•</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2ã€barrageList</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: &#96;[]&#96;</span><br><span class="line">- Acceptable-Values: Array</span><br><span class="line">- Function: å¼¹å¹•æ•°æ®åˆ—è¡¨</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3ã€boxWidth</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: &#96;parent&#39;s Width&#96;</span><br><span class="line">- Acceptable-Values: Number</span><br><span class="line">- Function: æ˜¾ç¤ºå¼¹å¹•åŒºåŸŸçš„å®½åº¦</span><br></pre></td></tr></table></figure>

<blockquote>
<p>4ã€boxHeight</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: &#96;window&#39;s Height&#96;</span><br><span class="line">- Acceptable-Values: Number</span><br><span class="line">- Function: æ˜¾ç¤ºå¼¹å¹•åŒºåŸŸçš„é«˜åº¦</span><br></pre></td></tr></table></figure>

<blockquote>
<p>5ã€messageHeight</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: &#96;message&#39;s Height&#96;</span><br><span class="line">- Acceptable-Values: Number</span><br><span class="line">- Function: å¼¹å¹•é«˜åº¦</span><br></pre></td></tr></table></figure>

<blockquote>
<p>6ã€maxWordCount</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: &#96;60&#96;</span><br><span class="line">- Acceptable-Values: Number</span><br><span class="line">- Function: å¼¹å¹•æœ€å¤§å­—æ•°é•¿åº¦ï¼Œè¶…è¿‡åˆ™å¿½ç•¥ï¼ˆä¸­æ–‡å 2é•¿åº¦ï¼Œè‹±æ–‡å 1é•¿åº¦ï¼‰</span><br></pre></td></tr></table></figure>

<blockquote>
<p>7ã€loop</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: &#96;false&#96;</span><br><span class="line">- Acceptable-Values: Boolean</span><br><span class="line">- Function: æ˜¯å¦å¾ªç¯</span><br></pre></td></tr></table></figure>

<blockquote>
<p>8ã€throttleGap</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: 2000</span><br><span class="line">- Acceptable-Values: Number</span><br><span class="line">- Function: å¼¹å¹•ä¹‹é—´çš„èŠ‚æµæ—¶é—´</span><br></pre></td></tr></table></figure>

<blockquote>
<p>9ã€posRender</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: null</span><br><span class="line">- Acceptable-Values: Function</span><br><span class="line">- Function: è‡ªå®šä¹‰å¼¹å¹•æ˜¾ç¤ºçš„æ³³é“</span><br><span class="line">- Return: éœ€è¦è¿”å›æ³³é“çš„ç´¢å¼•</span><br></pre></td></tr></table></figure>

<blockquote>
<p>10ã€lanesCount</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: 0</span><br><span class="line">- Acceptable-Values: Number</span><br><span class="line">- Function: æ³³é“çš„æ•°é‡ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="å¼¹å¹•æ•°æ®é€‰é¡¹"><a href="#å¼¹å¹•æ•°æ®é€‰é¡¹" class="headerlink" title="å¼¹å¹•æ•°æ®é€‰é¡¹"></a><strong>å¼¹å¹•æ•°æ®é€‰é¡¹</strong></h3><blockquote>
<p>1ã€id</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: &#96;null&#96;</span><br><span class="line">- Acceptable-Values: Number</span><br><span class="line">- Function: ç”¨ä»¥åŒºåˆ†æ¯æ¡å¼¹å¹•</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2ã€avatar</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: &#96;#&#96;</span><br><span class="line">- Acceptable-Values: String</span><br><span class="line">- Function: å¼¹å¹•çš„å¤´åƒ</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3ã€msg</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: &#96;null&#96;</span><br><span class="line">- Acceptable-Values: String</span><br><span class="line">- Function: å¼¹å¹•å†…å®¹</span><br></pre></td></tr></table></figure>

<blockquote>
<p>4ã€barrageStyle</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: &#96;normal&#96;</span><br><span class="line">- Acceptable-Values: String</span><br><span class="line">- Function: é¢å¤–çš„å¼¹å¹•çš„æ ·å¼</span><br></pre></td></tr></table></figure>

<blockquote>
<p>5ã€time</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: &#96;10&#96;</span><br><span class="line">- Acceptable-Values: Number</span><br><span class="line">- Function: å¼¹å¹•å±•ç¤ºçš„æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰</span><br></pre></td></tr></table></figure>

<blockquote>
<p>6ã€type</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: MESSAGE_TYPE.NORMAL</span><br><span class="line">- Acceptable-Values: Symbol</span><br><span class="line">- Function: å¼¹å¹•çš„ç±»å‹</span><br><span class="line">MESSAGE_TYPE.NORMAL ï¼š æ­£å¸¸ä»å³åˆ°å·¦æ»šåŠ¨</span><br><span class="line">MESSAGE_TYPE.FROM_TOP ï¼š å›ºå®šåœ¨å¼¹å¹•åŒºåŸŸä¸Šæ–¹</span><br></pre></td></tr></table></figure>

<blockquote>
<p>7ã€position</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: &#96;top&#96;</span><br><span class="line">- Acceptable-Values: Boolean</span><br><span class="line">- Function: ç›®å‰ä¸ºå›ºå®šå€¼ï¼Œä¹‹ååŠŸèƒ½æ›´æ–°ã€‚</span><br></pre></td></tr></table></figure>

<blockquote>
<p>8ã€extraWidth</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- Default: 0</span><br><span class="line">- Acceptable-Values: Number</span><br><span class="line">- Function: å¼¹å¹•çš„é¢å¤–å®½åº¦ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="Events"><a href="#Events" class="headerlink" title="Events"></a><strong>Events</strong></h3><p>å½“ <code>barrageList</code> ä¸ºç©ºçš„æ—¶å€™ä¼šè°ƒç”¨ <code>barrage-list-empty</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;vue-baberrage</span><br><span class="line">	:is-show&#x3D; &quot;barrageIsShow&quot;</span><br><span class="line">	:barrage-list &#x3D; &quot;barrageList&quot;</span><br><span class="line">	:loop &#x3D; &quot;barrageLoop&quot;</span><br><span class="line">	@barrage-list-empty&#x3D;&quot;sayHi&quot;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vueç»„ä»¶</category>
      </categories>
      <tags>
        <tag>vue js</tag>
      </tags>
  </entry>
  <entry>
    <title>canvasç”Ÿæˆæµ·æŠ¥å›¾</title>
    <url>/2020/07/15/canvas%E7%94%9F%E6%88%90%E6%B5%B7%E6%8A%A5%E5%9B%BE/</url>
    <content><![CDATA[<h3 id="æ ·ä¾‹å±•ç¤º"><a href="#æ ·ä¾‹å±•ç¤º" class="headerlink" title="æ ·ä¾‹å±•ç¤º"></a><strong>æ ·ä¾‹å±•ç¤º</strong></h3><p><a href="https://github.com/sunniejs/vue_canvas_poster" target="_blank" rel="noopener">æºç åœ°å€</a></p>
<p>å·¦ä¸Šè§’ä¸ºå¤´åƒä½ç½®ï¼Œå³ä¸‹è§’ä¸ºäºŒç»´ç ä½ç½®ã€‚</p>
<p><img src="https://s1.ax1x.com/2020/07/15/UdrlMq.png" alt="UdrlMq.png"></p>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a><strong>ä½¿ç”¨</strong></h3><blockquote>
<p>1ã€å®‰è£…å¼•ç”¨</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">cnpm i vue-canvas-poster --save</span><br><span class="line"><span class="comment">/*å•ç‹¬ä½¿ç”¨*/</span></span><br><span class="line"><span class="keyword">import</span> &#123;vueCanvasPoster&#125; <span class="keyword">from</span> <span class="string">'vue-canvas-poster'</span></span><br><span class="line">components: &#123;</span><br><span class="line">            vueCanvasPoster</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="comment">/*å…¨å±€å¼•ç”¨*/</span></span><br><span class="line"><span class="keyword">import</span> CanvasPoster <span class="keyword">from</span> <span class="string">'vue-canvas-poster'</span></span><br><span class="line">Vue.use(CanvasPoster)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2ã€html ä½¿ç”¨</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content_container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">vue-canvas-poster</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:widthPixels</span>=<span class="string">"1000"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:painting</span>=<span class="string">"painting"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">success</span>=<span class="string">"success"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">fail</span>=<span class="string">"fail"</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">vue-canvas-poster</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--ç”Ÿæˆçš„æµ·æŠ¥--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">"posterImg"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>3ã€å˜é‡ã€æµ·æŠ¥å¸ƒå±€</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">posterImg: <span class="string">''</span>,</span><br><span class="line">                <span class="comment">//ç”Ÿæˆçš„æµ·æŠ¥</span></span><br><span class="line">                painting: &#123;</span><br><span class="line">                    width: <span class="string">'550px'</span>,</span><br><span class="line">                    height: <span class="string">'876px'</span>,</span><br><span class="line">                    background: <span class="string">'èƒŒæ™¯å›¾'</span>,</span><br><span class="line">                    views: [&#123;</span><br><span class="line">                        type: <span class="string">'image'</span>,</span><br><span class="line">                        url: <span class="string">'å›¾ç‰‡é“¾æ¥'</span>,</span><br><span class="line">                        css: &#123;</span><br><span class="line">                            top: <span class="string">'20px'</span>,</span><br><span class="line">                            left: <span class="string">'36px'</span>,</span><br><span class="line">                            borderRadius: <span class="string">'40px'</span>,</span><br><span class="line">                            width: <span class="string">'80px'</span>,</span><br><span class="line">                            height: <span class="string">'80px'</span>,</span><br><span class="line">                        &#125;,</span><br><span class="line">                    &#125;, &#123;</span><br><span class="line">                        type: <span class="string">'text'</span>,</span><br><span class="line">                        text: <span class="string">'æˆ‘çš„åå­—'</span>,</span><br><span class="line">                        css: &#123;</span><br><span class="line">                            top: <span class="string">'48px'</span>,</span><br><span class="line">                            left: <span class="string">'136px'</span>,</span><br><span class="line">                            width: <span class="string">'360px'</span>,</span><br><span class="line">                            maxLines: <span class="number">1</span>,</span><br><span class="line">                            fontSize: <span class="string">'26px'</span>,</span><br><span class="line">                        &#125;,</span><br><span class="line">                    &#125;, &#123;</span><br><span class="line">                        type: <span class="string">'qrcode'</span>,</span><br><span class="line">                        content: <span class="string">'è¿™é‡Œå†™äºŒç»´ç é“¾æ¥åœ°å€'</span>,</span><br><span class="line">                        css: &#123;</span><br><span class="line">                            bottom: <span class="string">'50px'</span>,</span><br><span class="line">                            right: <span class="string">'26px'</span>,</span><br><span class="line">                            color: <span class="string">'#000'</span>,</span><br><span class="line">                            background: <span class="string">'#fff'</span>,</span><br><span class="line">                            width: <span class="string">'130px'</span>,</span><br><span class="line">                            height: <span class="string">'130px'</span>,</span><br><span class="line">                            borderWidth: <span class="string">'10px'</span>,</span><br><span class="line">                            borderColor: <span class="string">'#fff'</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                    &#125;,],</span><br><span class="line">                &#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>4ã€js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æˆåŠŸç”Ÿæˆæµ·æŠ¥</span></span><br><span class="line">            success(src) &#123;</span><br><span class="line">                <span class="keyword">this</span>.posterImg = src;</span><br><span class="line">                <span class="built_in">console</span>.log(src)</span><br><span class="line">            &#125;,</span><br><span class="line">            fail(err) &#123;</span><br><span class="line">                alert(err)</span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="è§„èŒƒ"><a href="#è§„èŒƒ" class="headerlink" title="è§„èŒƒ"></a><strong>è§„èŒƒ</strong></h3><p>Canvas éœ€è¦æ ¹æ®ä¸€å®šçš„è§„èŒƒæ¥è¿›è¡Œå›¾ç‰‡ç»˜åˆ¶ï¼Œå½“ç„¶æ¯”ç›´æ¥ç”» canvas ç®€å•çš„å¤šã€‚</p>
<h4 id="è°ƒè‰²æ¿å±æ€§"><a href="#è°ƒè‰²æ¿å±æ€§" class="headerlink" title="è°ƒè‰²æ¿å±æ€§"></a><strong>è°ƒè‰²æ¿å±æ€§</strong></h4><p>ä¸€ä¸ªè°ƒè‰²æ¿é¦–å…ˆéœ€è¦ç»™äºˆä¸€äº›æ•´ä½“å±æ€§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">background: å¯ä»¥æ˜¯é¢œè‰²å€¼ï¼Œä¹Ÿå¯ä»¥ä¸ºç½‘ç»œå›¾ç‰‡çš„é“¾æ¥ï¼Œé»˜è®¤ä¸ºç™½è‰²ï¼Œæ”¯æŒæ¸å˜è‰²</span><br><span class="line">width: å®½åº¦</span><br><span class="line">height: é«˜åº¦</span><br><span class="line">borderRadius: è¾¹æ¡†çš„åœ†è§’ï¼ˆè¯¥å±æ€§ä¹ŸåŒæ ·é€‚ç”¨äºå­ viewï¼‰</span><br><span class="line">views: é‡Œé¢æ‰¿è½½å­ view</span><br></pre></td></tr></table></figure>

<h4 id="View-å±æ€§"><a href="#View-å±æ€§" class="headerlink" title="View å±æ€§"></a><strong>View å±æ€§</strong></h4><p>å½“æˆ‘ä»¬æŠŠæ•´ä½“çš„è°ƒè‰²æ¿å±æ€§æ„å»ºèµ·æ¥åï¼Œé‡Œé¢å°±å¯ä»¥æ·»åŠ å­ View æ¥è¿›è¡Œç»˜åˆ¶äº†ã€‚</p>
<table>
<thead>
<tr>
<th>type</th>
<th align="center">å†…å®¹</th>
<th align="center">description</th>
<th align="center">è‡ªæœ‰ css</th>
</tr>
</thead>
<tbody><tr>
<td>image</td>
<td align="center">url</td>
<td align="center">è¡¨ç¤ºå›¾ç‰‡èµ„æºçš„åœ°å€ï¼Œæœ¬åœ°æˆ–ç½‘ç»œ</td>
<td align="center">è§ image å°èŠ‚</td>
</tr>
<tr>
<td>text</td>
<td align="center">text</td>
<td align="center">æ–‡æœ¬çš„å†…å®¹</td>
<td align="center">è§ text å°èŠ‚</td>
</tr>
<tr>
<td>rect</td>
<td align="center">æ— </td>
<td align="center">çŸ©å½¢</td>
<td align="center">color: é¢œè‰²ï¼Œæ”¯æŒæ¸å˜è‰²</td>
</tr>
<tr>
<td>qrcode</td>
<td align="center">content</td>
<td align="center">ç”»äºŒç»´ç </td>
<td align="center">background: èƒŒæ™¯é¢œè‰²ï¼ˆé»˜è®¤ä¸ºé€æ˜è‰²ï¼‰color: äºŒç»´ç é¢œè‰²ï¼ˆé»˜è®¤é»‘è‰²ï¼‰</td>
</tr>
</tbody></table>
<blockquote>
<p>1ã€image</p>
</blockquote>
<p>image å¯ä»¥è®¾ç½®æˆæœ¬åœ°å›¾ç‰‡æˆ–è€…ç½‘ç»œå›¾ç‰‡ï¼Œ æœ¬åœ°ç”¨require()å¼•å…¥å›¾ç‰‡ã€‚ å¹¶ä¸”å¦‚æœæœªè®¾ç½® image çš„é•¿å®½ï¼Œåˆ™é•¿å®½çš„å±æ€§å€¼ä¼šé»˜è®¤è®¾ä¸ºautoã€‚</p>
<table>
<thead>
<tr>
<th align="center">å±æ€§åç§°</th>
<th align="center">è¯´æ˜</th>
<th align="center">é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td align="center">width</td>
<td align="center">imageçš„å®½åº¦</td>
<td align="center">auto</td>
</tr>
<tr>
<td align="center">height</td>
<td align="center">imageçš„é«˜åº¦</td>
<td align="center">auto</td>
</tr>
<tr>
<td align="center">mode</td>
<td align="center">å›¾ç‰‡è£å‰ªã€ç¼©æ”¾çš„æ¨¡å¼</td>
<td align="center">aspectFill</td>
</tr>
</tbody></table>
<p><strong>scaleToFill</strong>ï¼šä¸ä¿æŒçºµæ¨ªæ¯”ç¼©æ”¾å›¾ç‰‡ï¼Œä½¿å›¾ç‰‡çš„å®½é«˜å®Œå…¨æ‹‰ä¼¸è‡³å¡«æ»¡ image å…ƒç´ </p>
<p><strong>aspectFill</strong>ï¼šä¿æŒçºµæ¨ªæ¯”ç¼©æ”¾å›¾ç‰‡ï¼Œåªä¿è¯å›¾ç‰‡çš„çŸ­è¾¹èƒ½å®Œå…¨æ˜¾ç¤ºå‡ºæ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå›¾ç‰‡é€šå¸¸åªåœ¨æ°´å¹³æˆ–å‚ç›´æ–¹å‘æ˜¯å®Œæ•´çš„ï¼Œå¦ä¸€ä¸ªæ–¹å‘å°†ä¼šå‘ç”Ÿæˆªå–ã€‚</p>
<p><strong>æ³¨ï¼šmode å±æ€§å’Œå°ç¨‹åº image çš„ mode å±æ€§åŠŸèƒ½ä¸€è‡´ï¼Œåªæ˜¯æ”¯æŒçš„ç±»å‹åªæœ‰ä¸¤ç§ï¼Œä¸”é»˜è®¤å€¼ä¸åŒã€‚ å½“ width æˆ– height å±æ€§è®¾ç½®ä¸º auto æ—¶ï¼Œmode å±æ€§å¤±æ•ˆ</strong></p>
<blockquote>
<p>2ã€text</p>
</blockquote>
<p>å› ä¸º text çš„ç‰¹æ®Šæ€§ï¼Œæ­¤å¤„å¯¹ text è¿›è¡Œå•ç‹¬è¯´æ˜ã€‚</p>
<table>
<thead>
<tr>
<th align="center">å±æ€§åç§°</th>
<th align="center">è¯´æ˜</th>
<th align="center">é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td align="center">fontSize</td>
<td align="center">å­—ä½“å¤§å°</td>
<td align="center">20px</td>
</tr>
<tr>
<td align="center">color</td>
<td align="center">å­—ä½“é¢œè‰²</td>
<td align="center">black</td>
</tr>
<tr>
<td align="center">maxLines</td>
<td align="center">æœ€å¤§è¡Œæ•°</td>
<td align="center">ä¸é™ï¼Œæ ¹æ® width æ¥</td>
</tr>
<tr>
<td align="center">lineHeight</td>
<td align="center">è¡Œé«˜ï¼ˆä¸Šä¸‹ä¸¤è¡Œæ–‡å­—baselineçš„è·ç¦»ï¼‰</td>
<td align="center">fontSize å¤§å°</td>
</tr>
<tr>
<td align="center">fontWeight</td>
<td align="center">å­—ä½“ç²—ç»†ã€‚ä»…æ”¯æŒ normal, bold</td>
<td align="center">normal</td>
</tr>
<tr>
<td align="center">textDecoration</td>
<td align="center">æ–‡æœ¬ä¿®é¥°ï¼Œæ”¯æŒ underlineã€ overlineã€ line-throughï¼Œä¹Ÿå¯ç»„åˆä½¿ç”¨</td>
<td align="center">æ— æ•ˆæœ</td>
</tr>
<tr>
<td align="center">textStyle</td>
<td align="center">fillï¼š å¡«å……æ ·å¼ï¼Œstrokeï¼šé•‚ç©ºæ ·å¼</td>
<td align="center">fill</td>
</tr>
<tr>
<td align="center">fontFamily</td>
<td align="center">å­—ä½“</td>
<td align="center">sans-serif</td>
</tr>
<tr>
<td align="center">background</td>
<td align="center">æ–‡å­—èƒŒæ™¯é¢œè‰²</td>
<td align="center">æ— </td>
</tr>
<tr>
<td align="center">padding</td>
<td align="center">æ–‡å­—èƒŒæ™¯é¢œè‰²è¾¹é™…ä¸æ–‡å­—é—´è·</td>
<td align="center">0px</td>
</tr>
<tr>
<td align="center">textAlign</td>
<td align="center">æ–‡å­—çš„å¯¹é½æ–¹å¼ï¼Œåˆ†ä¸º left, center, rightï¼Œview çš„å¯¹é½æ–¹å¼è¯·çœ‹ align å±æ€§</td>
<td align="center">left</td>
</tr>
</tbody></table>
<p>å½“æ–‡å­—è®¾ç½® width å±æ€§åï¼Œåˆ™æ–‡å­—å¸ƒå±€çš„æœ€å¤§å®½åº¦ä¸ä¼šè¶…è¿‡è¯¥ width ã€‚å¦‚æœå†…å®¹è¶…è¿‡ widthï¼Œåˆ™ä¼šè¿›è¡Œæ¢è¡Œï¼Œå¦‚æœæ­¤æ—¶æœªè®¾ç½® maxLines å±æ€§ï¼Œåˆ™ä¼šæŠŠæ‰€æœ‰å†…å®¹è¿›è¡Œæ¢è¡Œå¤„ç†ï¼Œè¡Œæ•°ç”±å†…å®¹å’Œ width å†³å®šã€‚å¦‚æœæ­¤æ—¶è®¾ç½®äº† maxLines å±æ€§ï¼Œåˆ™æœ€å¤§å±•ç¤ºæ‰€è®¾ç½®çš„è¡Œæ•°ï¼Œå¦‚æœè¿˜æœ‰å¤šä½™å†…å®¹æœªå±•ç¤ºå‡ºæ¥ï¼Œåˆ™åé¢ä¼šå¸¦ä¸Š â€¦ ã€‚</p>
<h4 id="å¸ƒå±€å±æ€§"><a href="#å¸ƒå±€å±æ€§" class="headerlink" title="å¸ƒå±€å±æ€§"></a><strong>å¸ƒå±€å±æ€§</strong></h4><p>ä»¥ä¸Š View ï¼Œé™¤å»è‡ªå·±æ‹¥æœ‰çš„ç‰¹åˆ«å±æ€§å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹çš„é€šç”¨å¸ƒå±€å±æ€§</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>è¯´æ˜</th>
<th>é»˜è®¤</th>
</tr>
</thead>
<tbody><tr>
<td>rotate</td>
<td>æ—‹è½¬ï¼ŒæŒ‰ç…§é¡ºæ—¶é’ˆæ—‹è½¬çš„åº¦æ•°</td>
<td>ä¸æ—‹è½¬</td>
</tr>
<tr>
<td>widthã€height</td>
<td>view çš„å®½åº¦å’Œé«˜åº¦ï¼Œå…¶ä¸­ image å’Œ text å¯ä¸è®¾ç½®</td>
<td></td>
</tr>
<tr>
<td>topã€rightã€bottomã€left</td>
<td>å¦‚ css ä¸­ä¸º absolute å¸ƒå±€æ—¶çš„ä½œç”¨ï¼Œå¯ä¸º è´Ÿå€¼</td>
<td>é»˜è®¤ top å’Œ left ä¸º 0</td>
</tr>
</tbody></table>
<blockquote>
<p>ç›¸å¯¹å¸ƒå±€æ–¹æ³•</p>
</blockquote>
<p>å¾ˆå¤šäººæœ‰è·å¾—æ–‡æœ¬å®½åº¦çš„éœ€æ±‚ï¼Œå› ä¸ºæ–‡æœ¬å®½åº¦éšç€å­—æ•°ä¸åŒè€ŒåŠ¨æ€å˜åŒ–ï¼Œå¦‚æœæƒ³åœ¨æ–‡æœ¬åé¢åŠ ä¸ªå›¾æ ‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è·å¾—æ–‡æœ¬å®½åº¦ã€‚ è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1ï¼Œé¦–å…ˆä½ éœ€è¦ä¸ºæ£€æµ‹é•¿åº¦çš„æ–‡æœ¬æ·»åŠ ä¸€ä¸ª idã€‚å¦‚ä¸‹</span><br><span class="line">&#123;</span><br><span class="line">  id: &#39;my-text-id&#39;,</span><br><span class="line">  type: &#39;text&#39;,</span><br><span class="line">  </span><br><span class="line">2ï¼Œç„¶ååœ¨åé¢çš„ view ä¸­ï¼Œä½ å¯ä»¥åœ¨ left å’Œ right å±æ€§ä¸­ä½¿ç”¨è¿™ä¸ªidã€‚å¦‚ä¸‹</span><br><span class="line">left: [&#39;10px&#39;, &#39;my-text-id&#39;, æ¯”ä¾‹] </span><br><span class="line">è¡¨ç¤ºå¸ƒå±€åœ¨è·ç¦»å·¦è¾¹ï¼ˆ10px + è¯¥textæ–‡æœ¬å®½åº¦ * æ¯”ä¾‹ï¼‰ çš„è·ç¦»ï¼Œæ¯”ä¾‹é»˜è®¤ä¸º 1ï¼Œå¯çœå»ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿæ•°æˆ–å°æ•°æ¥åšè®¡ç®—ï¼Œæœ€ç»ˆçš„ left ä¼šåŠ ä¸Šæ–‡æœ¬å®½åº¦ä¹˜ä»¥è¯¥æ•°çš„å€¼ã€‚</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼šæ¯”ä¾‹ä¸€å®šä¸ºä¸€ä¸ª number</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæƒ³è·å¾—é«˜åº¦ï¼Œtop ä¹Ÿæ”¯æŒä¸Šè¿°ç”¨æ³•ï¼Œå¹¶ä¸”é™¤æ–‡æœ¬å¤–ï¼Œä½ å¯ä»¥å¯¹ä»»ä½• view è®¾ç½®ä¸€ä¸ª idï¼Œç„¶åä½¿ç”¨ä¸Šè¿°æ–¹æ³•è¿›è¡Œç›¸å¯¹å¸ƒå±€ã€‚</p>
<p><strong>æ³¨ï¼šç›¸å¯¹å¸ƒå±€çš„é‚£ä¸ª view ä»£ç ä¸€å®šéœ€è¦åœ¨è¢«ç›¸å¯¹çš„ view çš„ä¸‹é¢ã€‚</strong></p>
<blockquote>
<p>1ã€border ç±»å‹</p>
</blockquote>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>è¯´æ˜</th>
<th>é»˜è®¤</th>
</tr>
</thead>
<tbody><tr>
<td>borderRadius</td>
<td>è¾¹ç•Œåœ†è§’ç¨‹åº¦ï¼Œå¦‚æœæ˜¯æ­£æ–¹å½¢å¸ƒå±€ï¼Œè¯¥å±æ€§ä¸ºä¸€åŠå®½æˆ–é«˜æ—¶ï¼Œåˆ™ä¸ºåœ†å½¢</td>
<td>0</td>
</tr>
<tr>
<td>borderWidth</td>
<td>è¾¹ç•Œå®½åº¦ï¼Œå¤–è¾¹ç•Œ</td>
<td>å¿…è®¾å€¼ï¼Œå¦åˆ™æ— è¾¹æ¡†æ•ˆæœ</td>
</tr>
<tr>
<td>borderColor</td>
<td>è¾¹æ¡†é¢œè‰²</td>
<td>black</td>
</tr>
</tbody></table>
<p>align</p>
<p>Painter çš„ align ç±»å‹ä¸ css ä¸­çš„ align æœ‰äº›è®¸ä¸åŒã€‚åœ¨ Painter ä¸­ align è¡¨ç¤º view æœ¬èº«çš„å¯¹é½æ–¹å¼ï¼Œè€Œä¸åƒ css ä¸­è¡¨ç¤ºå¯¹å…¶å­ view çš„æ“ä½œã€‚align å¯ä»¥ä½œç”¨åœ¨ Painter æ”¯æŒçš„æ‰€æœ‰ view ä¸Šã€‚å®ƒä»¥è®¾ç½®çš„ leftã€topã€rightã€bottom çš„ä½ç½®ä¸ºåŸºå‡†ï¼Œç„¶ååšä¸åŒçš„å¯¹é½æ“ä½œã€‚å¹¶ä¸” align åœ¨æ–‡å­—å¤šè¡Œæƒ…å†µä¸‹ï¼Œä¼šå½±å“å¤šè¡Œæ–‡å­—çš„å¯¹é½æ–¹å¼ã€‚</p>
<p><strong>æ³¨æ„ï¼šå¦‚æœå¸ƒå±€ä½¿ç”¨äº† right ç¡®å®šä½ç½®ï¼Œåˆ™è¯¥ view ä¼šé»˜è®¤å³å¯¹é½å¸ƒå±€ï¼Œä½†æ­¤æ—¶æ–‡å­—è¿˜æ˜¯ä»å·¦è¾¹ç»˜åˆ¶ã€‚</strong></p>
<h4 id="CSS3-æ”¯æŒ"><a href="#CSS3-æ”¯æŒ" class="headerlink" title="CSS3 æ”¯æŒ"></a><strong>CSS3 æ”¯æŒ</strong></h4><blockquote>
<p>1ã€shadow</p>
</blockquote>
<p>shadow å¯ä»¥åŒæ—¶ä¿®é¥° imageã€rectã€textã€qrcode ç­‰ ã€‚åœ¨ä¿®é¥° text æ—¶åˆ™ç›¸å½“äº text-shadowï¼›ä¿®é¥° image å’Œ rect æ—¶ç›¸å½“äº box-shadowï¼›ä¿®é¥° qrcode æ—¶ï¼Œåˆ™ç›¸å½“äºäºŒç»´ç æœ‰æ•ˆåŒºåŸŸçš„æŠ•å½±ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">shadow: &#39;h-shadow v-shadow blur color&#39;;</span><br><span class="line">h-shadow: å¿…éœ€ã€‚æ°´å¹³é˜´å½±çš„ä½ç½®ã€‚å…è®¸è´Ÿå€¼ã€‚</span><br><span class="line">v-shadow: å¿…éœ€ã€‚å‚ç›´é˜´å½±çš„ä½ç½®ã€‚å…è®¸è´Ÿå€¼ã€‚</span><br><span class="line">blur: å¿…éœ€ã€‚æ¨¡ç³Šçš„è·ç¦»ã€‚</span><br><span class="line">color: å¿…éœ€ã€‚é˜´å½±çš„é¢œè‰²ã€‚</span><br></pre></td></tr></table></figure>

<p>æ¸å˜è‰²æ”¯æŒ</p>
<p>ä½ å¯ä»¥åœ¨ç”»å¸ƒçš„ background å±æ€§æˆ–è€… rect çš„ color å±æ€§ä¸­ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å®ç° css 3 çš„æ¸å˜è‰²ï¼Œå…¶ä¸­ radial-gradient æ¸å˜çš„åœ†å¿ƒä¸º view ä¸­ç‚¹ï¼ŒåŠå¾„ä¸ºæœ€é•¿è¾¹ï¼Œç›®å‰ä¸æ”¯æŒè‡ªå·±è®¾ç½®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">linear-gradient(-135deg, blue 0%, rgba(18, 52, 86, 1) 20%, #987 80%)</span><br><span class="line">radial-gradient(rgba(0, 0, 0, 0) 5%, #0ff 15%, #f0f 60%)</span><br></pre></td></tr></table></figure>

<p><strong>ï¼ï¼ï¼æ³¨æ„ï¼šé¢œè‰²åé¢çš„ç™¾åˆ†æ¯”ä¸€å®šå¾—å†™ã€‚</strong></p>
<h4 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a><strong>äº‹ä»¶</strong></h4><blockquote>
<p>success</p>
</blockquote>
<p>è¿”å›ç”Ÿæˆ base64 å›¾ç‰‡çš„æœ¬åœ° url,è®¾ç½® src</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  success(src) &#123;</span><br><span class="line">    &#x2F;&#x2F; è®¾ç½®imgçš„src</span><br><span class="line">    this.src &#x3D; src</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>fail</p>
</blockquote>
<p>è¿”å›å¤±è´¥ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">fail(err) &#123;</span><br><span class="line">     console.log(&#39;fail&#39;, err)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>vueç»„ä»¶</category>
      </categories>
      <tags>
        <tag>h5</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾ç‰‡ç§»åŠ¨ã€ç¼©æ”¾</title>
    <url>/2020/07/15/%E5%9B%BE%E7%89%87%E7%A7%BB%E5%8A%A8%E3%80%81%E7%BC%A9%E6%94%BE/</url>
    <content><![CDATA[<h4 id="html"><a href="#html" class="headerlink" title="html"></a><strong>html</strong></h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;template_move_box&quot;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;template_move&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;temp_url_box&quot;&gt;</span><br><span class="line">            &lt;img class&#x3D;&quot;template_url&quot; :src&#x3D;&quot;imageUrl&quot;&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;code_box&quot;&gt;</span><br><span class="line">                &lt;img class&#x3D;&quot;code_img&quot; src&#x3D;&quot;&#x2F;images&#x2F;test_code_img.jpg&quot;&gt;</span><br><span class="line">                &lt;div id&#x3D;&quot;zoom_id&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="css"><a href="#css" class="headerlink" title="css"></a><strong>css</strong></h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.template_move_box &#123;</span><br><span class="line">    float: left;</span><br><span class="line">&#125;</span><br><span class="line">.template_move &#123;</span><br><span class="line">    width: 400px;</span><br><span class="line">    height: 600px;</span><br><span class="line">    position: relative;</span><br><span class="line">    background: #CCCCCC;</span><br><span class="line">    text-align: center;</span><br><span class="line">&#125;</span><br><span class="line">.temp_url_box &#123;</span><br><span class="line">    width: 337px;</span><br><span class="line">    height: 600px;</span><br><span class="line">    position: relative;</span><br><span class="line">    display: inline-block;</span><br><span class="line">&#125;</span><br><span class="line">.template_url &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.code_box &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    bottom: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    z-index: 1;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">&#125;</span><br><span class="line">.code_img &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">    cursor: move;</span><br><span class="line">&#125;</span><br><span class="line">#zoom_id &#123;</span><br><span class="line">    width: 10px;</span><br><span class="line">    height: 10px;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    cursor: se-resize;</span><br><span class="line">    position: absolute;</span><br><span class="line">    right: 0;</span><br><span class="line">    bottom: 0;</span><br><span class="line">    background-color: rgb(122, 191, 238);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="js"><a href="#js" class="headerlink" title="js"></a><strong>js</strong></h4><p>js åŸç”ŸJavaScriptï¼Œä¸éœ€è¦å¼•å…¥æ’ä»¶</p>
<blockquote>
<p>åœ¨éœ€è¦ç§»åŠ¨ç¼©æ”¾çš„æ–¹æ³•é‡Œé¢ç›´æ¥è°ƒç”¨æ­¤æ–¹æ³•å°±å¥½ã€‚</p>
<p>æ­¤å¤„æœ‰ä¸ªå°ç»†èŠ‚ï¼Œåœ¨ç”¨JavaScriptå– class ä¸­domæ–‡ä»¶çš„æ—¶å€™å–åˆ°çš„æ˜¯æ•°ç»„ï¼Œéœ€è¦åœ¨åé¢åŠ ã€0ã€‘ã€‚ä¾‹å¦‚ï¼š<strong>document.getElementsByClassName(â€œcode_boxâ€)[0]</strong></p>
<p>è‹¥æ˜¯å– id ä¸­çš„domç»“æ„æ—¶åˆ™ä¸éœ€è¦åŠ ã€0ã€‘ã€‚ä¾‹å¦‚ï¼š <strong>document.getElementById(â€œzoom_idâ€)</strong></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;ç§»åŠ¨ç¼©æ”¾æµ·æŠ¥</span><br><span class="line">moveTeamp() &#123;</span><br><span class="line">    let that &#x3D; this;</span><br><span class="line">    setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">        &#x2F;&#x2F; boxæ˜¯è£…å›¾ç‰‡çš„å®¹å™¨,tempæ˜¯å›¾ç‰‡ç§»åŠ¨ç¼©æ”¾çš„èŒƒå›´,scaleæ˜¯æ§åˆ¶ç¼©æ”¾çš„å°å›¾æ ‡</span><br><span class="line">        let box &#x3D; document.getElementsByClassName(&quot;code_box&quot;)[0];</span><br><span class="line">        let temp &#x3D; document.getElementsByClassName(&#39;temp_url_box&#39;)[0];</span><br><span class="line">        let scale &#x3D; document.getElementById(&quot;zoom_id&quot;);</span><br><span class="line"></span><br><span class="line">        var codeOriginalW &#x3D; that.qrWidth;&#x2F;&#x2F;äºŒç»´ç å›¾ç‰‡åŸå§‹å®½åº¦</span><br><span class="line">        var codeOriginalH &#x3D; that.qrHeight;&#x2F;&#x2F;äºŒç»´ç å›¾ç‰‡åŸå§‹é«˜åº¦</span><br><span class="line">        var codeScale &#x3D; 0;&#x2F;&#x2F;å›¾ç‰‡ç¼©æ”¾</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; å›¾ç‰‡ç§»åŠ¨æ•ˆæœ</span><br><span class="line">        box.onmousedown &#x3D; function (ev) &#123;</span><br><span class="line">            var oEvent &#x3D; ev;</span><br><span class="line">            &#x2F;&#x2F; æµè§ˆå™¨æœ‰ä¸€äº›å›¾ç‰‡çš„é»˜è®¤äº‹ä»¶,è¿™é‡Œè¦é˜»æ­¢</span><br><span class="line">            oEvent.preventDefault();</span><br><span class="line">            var disX &#x3D; oEvent.clientX - box.offsetLeft;</span><br><span class="line">            var disY &#x3D; oEvent.clientY - box.offsetTop;</span><br><span class="line"></span><br><span class="line">            &#x2F;*console.table(&#123;</span><br><span class="line">                &#39;é¼ æ ‡ç‚¹å‡»äº‹ä»¶&#39;:0,</span><br><span class="line">                &#39;é¼ æ ‡æŒ‡é’ˆè·ç¦»é¡µé¢å·¦ä¾§è·ç¦»&#39;:oEvent.clientX,</span><br><span class="line">                &#39;å›¾ç‰‡è·ç¦»çˆ¶å®¹å™¨å·¦ä¾§è·ç¦»&#39;:box.offsetLeft,</span><br><span class="line">                &#39;çˆ¶å®¹å™¨åŠ é¼ æ ‡æŒ‡é’ˆç›¸å¯¹äºå›¾ç‰‡ç‚¹å‡»ä½ç½® è·ç¦»é¡µé¢å·¦ä¾§è·ç¦»&#39;:disX,</span><br><span class="line">            &#125;)*&#x2F;</span><br><span class="line"></span><br><span class="line">            temp.onmousemove &#x3D; function (ev) &#123;</span><br><span class="line">                oEvent &#x3D; ev;</span><br><span class="line">                oEvent.preventDefault();</span><br><span class="line">                var x &#x3D; oEvent.clientX - disX;</span><br><span class="line">                var y &#x3D; oEvent.clientY - disY;</span><br><span class="line"></span><br><span class="line">                &#x2F;&#x2F; å›¾å½¢ç§»åŠ¨çš„è¾¹ç•Œåˆ¤æ–­</span><br><span class="line">                x &#x3D; x &lt;&#x3D; 0 ? 0 : x;</span><br><span class="line">                x &#x3D; x &gt;&#x3D; temp.offsetWidth - box.offsetWidth ? temp.offsetWidth - box.offsetWidth : x;</span><br><span class="line">                y &#x3D; y &lt;&#x3D; 0 ? 0 : y;</span><br><span class="line">                y &#x3D; y &gt;&#x3D; temp.offsetHeight - box.offsetHeight ? temp.offsetHeight - box.offsetHeight : y;</span><br><span class="line">                box.style.left &#x3D; x + &#39;px&#39;;</span><br><span class="line">                box.style.top &#x3D; y + &#39;px&#39;;</span><br><span class="line"></span><br><span class="line">                that.qrLeft &#x3D; x;</span><br><span class="line">                that.qrTop &#x3D; y;</span><br><span class="line"></span><br><span class="line">                &#x2F;*console.table(&#123;</span><br><span class="line">                    &#39;é¼ æ ‡ç§»åŠ¨äº‹ä»¶&#39;:1,</span><br><span class="line">                    &#39;å›¾ç‰‡ç›¸å¯¹äºçˆ¶å…ƒç´ å·¦ä¾§è·ç¦» &#39;:x,</span><br><span class="line">                    &#39;å›¾ç‰‡ç›¸å¯¹äºçˆ¶å…ƒç´ ä¸Šæ–¹è·ç¦»&#39;:y,</span><br><span class="line">                &#125;)*&#x2F;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; å›¾å½¢ç§»å‡ºçˆ¶ç›’å­å–æ¶ˆç§»åŠ¨äº‹ä»¶,é˜²æ­¢ç§»åŠ¨è¿‡å¿«è§¦å‘é¼ æ ‡ç§»å‡ºäº‹ä»¶,å¯¼è‡´é¼ æ ‡å¼¹èµ·äº‹ä»¶å¤±æ•ˆ</span><br><span class="line">            temp.onmouseleave &#x3D; function () &#123;</span><br><span class="line">                temp.onmousemove &#x3D; null;</span><br><span class="line">                temp.onmouseup &#x3D; null;</span><br><span class="line">            &#125;</span><br><span class="line">            &#x2F;&#x2F; é¼ æ ‡å¼¹èµ·ååœæ­¢ç§»åŠ¨</span><br><span class="line">            temp.onmouseup &#x3D; function () &#123;</span><br><span class="line">                temp.onmousemove &#x3D; null;</span><br><span class="line">                temp.onmouseup &#x3D; null;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F; å›¾ç‰‡ç¼©æ”¾æ•ˆæœ</span><br><span class="line">        scale.onmousedown &#x3D; function (e) &#123;</span><br><span class="line">            &#x2F;&#x2F; é˜»æ­¢å†’æ³¡,é¿å…ç¼©æ”¾æ—¶è§¦å‘ç§»åŠ¨äº‹ä»¶</span><br><span class="line">            e.stopPropagation();</span><br><span class="line">            e.preventDefault();</span><br><span class="line">            var pos &#x3D; &#123;</span><br><span class="line">                &#39;w&#39;: box.offsetWidth,</span><br><span class="line">                &#39;h&#39;: box.offsetHeight,</span><br><span class="line">                &#39;x&#39;: e.clientX,</span><br><span class="line">                &#39;y&#39;: e.clientY</span><br><span class="line">            &#125;;</span><br><span class="line">            temp.onmousemove &#x3D; function (ev) &#123;</span><br><span class="line">                ev.preventDefault();</span><br><span class="line">                &#x2F;&#x2F; è®¾ç½®å›¾ç‰‡çš„æœ€å°ç¼©æ”¾ä¸º30*30</span><br><span class="line">                &#x2F;&#x2F;Math.max() å‡½æ•°è¿”å›ä¸€ç»„æ•°ä¸­çš„æœ€å¤§å€¼,</span><br><span class="line">                var w &#x3D; Math.max(30, ev.clientX - pos.x + pos.w);</span><br><span class="line">                &#x2F;&#x2F;ç¼©æ”¾ç‡</span><br><span class="line">                codeScale &#x3D; parseFloat((w &#x2F; codeOriginalW).toFixed(2));</span><br><span class="line">                &#x2F;&#x2F;è®¾ç½®å®½é«˜æ¯”ä¾‹å›ºå®šç¼©æ”¾</span><br><span class="line">                var h &#x3D; parseInt(codeOriginalH * codeScale);</span><br><span class="line">                &#x2F;&#x2F; console.log(w,h)</span><br><span class="line">                &#x2F;&#x2F; è®¾ç½®å›¾ç‰‡çš„æœ€å¤§å®½é«˜ï¼Œä¸è¶…è¿‡çˆ¶å®¹å™¨å®½é«˜</span><br><span class="line">                &#x2F;&#x2F;å½“å®½åº¦å¤§äºçˆ¶å…ƒç´ </span><br><span class="line">                w &#x3D; w &gt;&#x3D; temp.offsetWidth - box.offsetLeft ? temp.offsetWidth - box.offsetLeft : w;</span><br><span class="line">                &#x2F;&#x2F; h &#x3D; h &gt;&#x3D; temp.offsetHeight-box.offsetTop ? temp.offsetHeight-box.offsetTop : h;</span><br><span class="line">                box.style.width &#x3D; w + &#39;px&#39;;</span><br><span class="line">                box.style.height &#x3D; h + &#39;px&#39;;</span><br><span class="line">                &#x2F;&#x2F; console.log(box.offsetWidth,box.offsetHeight)</span><br><span class="line">                &#x2F;* console.table(&#123;</span><br><span class="line">                     &#39;é¼ æ ‡æ‹–åŠ¨äº‹ä»¶&#39;: 1,</span><br><span class="line">                     &#39;æ”¹å˜åå›¾ç‰‡çš„å®½åº¦ &#39;: w,</span><br><span class="line">                     &#39;æ”¹å˜åå›¾ç‰‡çš„é«˜åº¦&#39;: h,</span><br><span class="line">                     &#39;å›¾ç‰‡ç¼©æ”¾å€æ•°&#39;: codeScale</span><br><span class="line">                 &#125;)*&#x2F;</span><br><span class="line"></span><br><span class="line">                that.codeWeight &#x3D; w;</span><br><span class="line">                that.codeHeight &#x3D; h;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            temp.onmouseleave &#x3D; function () &#123;</span><br><span class="line">                temp.onmousemove &#x3D; null;</span><br><span class="line">                temp.onmouseup &#x3D; null;</span><br><span class="line">            &#125;</span><br><span class="line">            temp.onmouseup &#x3D; function () &#123;</span><br><span class="line">                temp.onmousemove &#x3D; null;</span><br><span class="line">                temp.onmouseup &#x3D; null;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, 1000)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>å¸¸ç”¨å·¥å…·</category>
      </categories>
      <tags>
        <tag>pc</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯¼å‡ºexcelè¡¨æ ¼</title>
    <url>/2020/07/15/%E5%AF%BC%E5%87%BAexcel%E8%A1%A8%E6%A0%BC/</url>
    <content><![CDATA[<h4 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a><strong>å¼•ç”¨</strong></h4><blockquote>
<p>1ã€åœ¨ style.js ä¸­å¼•å…¥æ–¹æ³•</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">//ä¸‹è½½æ–‡ä»¶æµ</span></span><br><span class="line">  operateFile(file, filename) &#123;</span><br><span class="line">    <span class="comment">// let fileName = filename + "-" + new Date().getFullYear() + '' +( new Date().getMonth()+1)  + '' +new Date() .getDate()+".xls";</span></span><br><span class="line">    <span class="comment">// let blobObject = new Blob([file], &#123;type: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"&#125;);</span></span><br><span class="line">    <span class="comment">// //æ˜¯IEæµè§ˆå™¨</span></span><br><span class="line">    <span class="comment">// if(!!window.ActiveXObject || "ActiveXObject" in window)&#123;</span></span><br><span class="line">    <span class="comment">//     window.navigator.msSaveOrOpenBlob(blobObject,fileName);</span></span><br><span class="line">    <span class="comment">// &#125;else&#123;//ç«ç‹è°·æ­Œéƒ½å…¼å®¹</span></span><br><span class="line">    <span class="comment">//     //æ¨¡æ¿ä¸­è¦æœ‰ä¸€ä¸ªé¢„å®šä¹‰å¥½çš„aæ ‡ç­¾</span></span><br><span class="line">    <span class="comment">//     let link = document.getElementById('a_id')</span></span><br><span class="line">    <span class="comment">//     link.href = URL.createObjectURL(blobObject);</span></span><br><span class="line">    <span class="comment">//     link.download = fileName</span></span><br><span class="line">    <span class="comment">//     link.click();</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="keyword">var</span> filename = <span class="string">"è®¢å•è®°å½•"</span>;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="built_in">window</span>.URL.createObjectURL(file.data);</span><br><span class="line">    <span class="keyword">let</span> link = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>);</span><br><span class="line">    link.style.display = <span class="string">"none"</span>;</span><br><span class="line">    link.href = url;</span><br><span class="line">    link.setAttribute(<span class="string">"download"</span>, filename + <span class="string">".xls"</span>);</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(link);</span><br><span class="line">    link.click();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2ã€åœ¨é¡µé¢ä¸­å¼•ç”¨</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">"@/static/js/style"</span>;</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a><strong>ä½¿ç”¨</strong></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¼å‡ºè¡¨æ ¼</span></span><br><span class="line">            exportDialog() &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="keyword">this</span>.supplierId)</span><br><span class="line">                <span class="keyword">let</span> obj = &#123;</span><br><span class="line">                    page: <span class="number">0</span>,</span><br><span class="line">                    size: <span class="number">100000</span>,</span><br><span class="line">                    start_time: <span class="keyword">this</span>.startTime,</span><br><span class="line">                    end_time: <span class="keyword">this</span>.endTime,</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">this</span>.$http.getFile(<span class="string">"/api"</span>, obj).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    style.operateFile(res, <span class="string">'è®¢å•è®°å½•'</span>)</span><br><span class="line">                    <span class="comment">/*var filename = 'è®¢å•è®°å½•';</span></span><br><span class="line"><span class="comment">                    let url = window.URL.createObjectURL(res)</span></span><br><span class="line"><span class="comment">                    let link = document.createElement('a')</span></span><br><span class="line"><span class="comment">                    link.style.display = 'none'</span></span><br><span class="line"><span class="comment">                    link.href = url</span></span><br><span class="line"><span class="comment">                    link.setAttribute('download', filename + '.xls')</span></span><br><span class="line"><span class="comment">                    document.body.appendChild(link)</span></span><br><span class="line"><span class="comment">                    link.click()*/</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å¸¸ç”¨å·¥å…·</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>keep-aliveä¿æŒé¡µé¢æ´»æ€§</title>
    <url>/2020/07/15/keep-alive%E4%BF%9D%E6%8C%81%E9%A1%B5%E9%9D%A2%E6%B4%BB%E6%80%A7/</url>
    <content><![CDATA[<p><strong>keep-alive</strong>æ˜¯ Vue å†…ç½®çš„ä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥ä½¿è¢«åŒ…å«çš„ç»„ä»¶ä¿ç•™çŠ¶æ€</p>
<h3 id="ä¸€èˆ¬çš„ä¿æŒæ´»æ€§"><a href="#ä¸€èˆ¬çš„ä¿æŒæ´»æ€§" class="headerlink" title="ä¸€èˆ¬çš„ä¿æŒæ´»æ€§"></a><strong>ä¸€èˆ¬çš„ä¿æŒæ´»æ€§</strong></h3><p>åœ¨é¡µé¢ç¿»é¡µæ—¶è¿›å…¥å¦ä¸€é¡µè¿”å›ä¹‹åä»åœ¨åŸå§‹é¡µã€‚</p>
<blockquote>
<p>1ã€<strong>åœ¨ App.vue é‡Œé¢ï¼š</strong></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">v-if</span>=<span class="string">"!$route.meta.keepAlive"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">v-if</span>=<span class="string">"$route.meta.keepAlive"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>2ã€<strong>åœ¨ router.js é‡Œé¢ä½¿ç”¨ meta</strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">           path: <span class="string">"/manage/market/groupSet"</span>,<span class="comment">//æ‹¼å›¢è®¾ç½®</span></span><br><span class="line">           name: <span class="string">"groupSet"</span>,</span><br><span class="line">           component: groupSet,</span><br><span class="line">           meta: &#123;</span><br><span class="line">               keepAlive: <span class="literal">true</span></span><br><span class="line">           &#125;,</span><br><span class="line">       &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="æ ¹æ®é“¾æ¥é€‰æ‹©æ€§ä¿æŒæ´»æ€§"><a href="#æ ¹æ®é“¾æ¥é€‰æ‹©æ€§ä¿æŒæ´»æ€§" class="headerlink" title="æ ¹æ®é“¾æ¥é€‰æ‹©æ€§ä¿æŒæ´»æ€§"></a><strong>æ ¹æ®é“¾æ¥é€‰æ‹©æ€§ä¿æŒæ´»æ€§</strong></h3><p>ä» /test é“¾æ¥è¿‡æ¥çš„ä¿æŒé¡µé¢æ´»æ€§ã€‚é…åˆä¸Šé¢<strong>keepAlive</strong>ä¸€èµ·ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">beforeRouteEnter(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">from</span>.path == <span class="string">"/test"</span>) &#123;</span><br><span class="line">                to.meta.isBack = <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                to.meta.isBack = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            next();</span><br><span class="line">        &#125;,</span><br><span class="line">activated() &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">this</span>.$route.meta.isBack) &#123;</span><br><span class="line">                <span class="comment">//ä¸ä¿æŒé¡µé¢æ´»æ€§</span></span><br><span class="line">                <span class="keyword">this</span>.keyword=<span class="string">''</span>;<span class="comment">/*æ¸…ç©ºæŸ¥è¯¢æ¡ä»¶*/</span></span><br><span class="line">                <span class="keyword">this</span>.loadList();<span class="comment">/*åˆ—è¡¨é‡æ–°åŠ è½½*/</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//ä¿æŒé¡µé¢æ´»æ€§</span></span><br><span class="line">                <span class="keyword">this</span>.$route.meta.isBack = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">this</span>.loadList();<span class="comment">/*åˆ—è¡¨é‡æ–°åŠ è½½*/</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: <span class="string">"/test"</span>,</span><br><span class="line">  name: <span class="string">"test"</span>,</span><br><span class="line">  component: test,</span><br><span class="line">  meta: &#123;</span><br><span class="line">        keepAlive: <span class="literal">true</span>,</span><br><span class="line">        isBack: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>vueé…ç½®</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
</search>
