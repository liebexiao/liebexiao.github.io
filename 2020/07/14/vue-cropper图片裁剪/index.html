
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>vue-cropper图片裁剪 -  </title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="liebexiao,"> 
    <meta name="description" content="日常前端小工具,使用
安装引用

1234cnpm install cropperjs// 引入import Cropper from &#39;cropperjs&#39;import &#39;cropperjs/dist/cropp,"> 
    <meta name="author" content="晓晓"> 
    <link rel="alternative" href="atom.xml" title=" " type="application/atom+xml"> 
    <link rel="icon" href="https://s1.ax1x.com/2020/05/28/telmDJ.png"> 
    
    
<link rel="stylesheet" href="/css/diaspora.css">

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
<meta name="generator" content="Hexo 4.2.1"></head>

<body class="loading">
    <span id="config-title" style="display:none"> </span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="http://liebexiao.github.io"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">vue-cropper图片裁剪</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">vue-cropper图片裁剪</h1>
        <div class="stuff">
            <span>七月 14, 2020</span>
            
  <ul class="post-tags-list" itemprop="keywords"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/vue-js/" rel="tag">vue,js</a></li></ul>


        </div>
        <div class="content markdown">
            <h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a><strong>使用</strong></h3><blockquote>
<p>安装引用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cnpm install cropperjs</span><br><span class="line"><span class="comment">// 引入</span></span><br><span class="line"><span class="keyword">import</span> Cropper <span class="keyword">from</span> <span class="string">'cropperjs'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'cropperjs/dist/cropper.min.css'</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>上传剪裁</p>
</blockquote>
<p>上传图片到 oss 然后进行裁剪将 x，y，width，height 拼接到图片链接上即完成裁剪。</p>
<p>在弹框中实现图片裁剪及预览。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content_div"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--上传图片--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"avatar-uploader tailor_class"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-loading</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">action</span>=<span class="string">"/api/base/file/upload"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:show-file-list</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:on-progress</span>=<span class="string">"progressFile"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:on-success</span>=<span class="string">"saveFileList"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-if</span>=<span class="string">"item_images"</span> <span class="attr">:src</span>=<span class="string">"item_images"</span> <span class="attr">class</span>=<span class="string">"avatar"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--                                &lt;img v-if="item_images" class="avatar"&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">"el-icon-plus avatar-uploader-icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--弹框--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-dialog</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:title</span>=<span class="string">"dialogTitle"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:visible.sync</span>=<span class="string">"dialogVisible"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">"600px"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:before-close</span>=<span class="string">"cancelCropper"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"dialog_box"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"rc-cropper clearfix"</span> <span class="attr">v-if</span>=<span class="string">"item_images"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-if</span>=<span class="string">"item_images"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">id</span>=<span class="string">"img_id"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ref</span>=<span class="string">"canvasRef"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:src</span>=<span class="string">"item_images"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"avatar"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"preview_box"</span> <span class="attr">v-show</span>=<span class="string">"finalImg!=''"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"preview_word"</span>&gt;</span>预览图片<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"preview_img_box"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"preview_img"</span> <span class="attr">:src</span>=<span class="string">"finalImg"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--限制比例--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"margin-top: 20px"</span> <span class="attr">v-show</span>=<span class="string">"item_images"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">v-model</span>=<span class="string">"cropProportionSelect"</span> <span class="attr">label</span>=<span class="string">"0"</span> <span class="attr">border</span> <span class="attr">size</span>=<span class="string">"medium"</span></span></span><br><span class="line"><span class="tag">        &gt;</span>不限制比例</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">v-model</span>=<span class="string">"cropProportionSelect"</span> <span class="attr">label</span>=<span class="string">"1"</span> <span class="attr">border</span> <span class="attr">size</span>=<span class="string">"medium"</span></span></span><br><span class="line"><span class="tag">        &gt;</span>2.35 ：1</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-radio</span> <span class="attr">v-model</span>=<span class="string">"cropProportionSelect"</span> <span class="attr">label</span>=<span class="string">"2"</span> <span class="attr">border</span> <span class="attr">size</span>=<span class="string">"medium"</span></span></span><br><span class="line"><span class="tag">        &gt;</span>1 ：1</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-radio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"footer"</span> <span class="attr">class</span>=<span class="string">"dialog-footer clearfix"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"sureCropper"</span>&gt;</span>确 定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">"float: right !important;margin-right: 10px"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">"cancelCropper"</span></span></span><br><span class="line"><span class="tag">        &gt;</span>取 消</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">loading:<span class="literal">false</span>,</span><br><span class="line">item_images: <span class="string">''</span>,<span class="comment">//原图</span></span><br><span class="line">finalImg: <span class="string">''</span>,<span class="comment">//剪切图</span></span><br><span class="line">cropper: <span class="literal">null</span>,</span><br><span class="line">croppShow: <span class="literal">false</span>,<span class="comment">//剪裁是否显示</span></span><br><span class="line">dialogTitle: <span class="string">'剪裁图片'</span>,<span class="comment">//弹框标题</span></span><br><span class="line">dialogVisible: <span class="literal">false</span>,<span class="comment">//弹框显示状态</span></span><br><span class="line">cropProportionSelect: <span class="string">'0'</span>,<span class="comment">//裁剪框比例选择</span></span><br><span class="line">cropProportion: <span class="string">''</span>,<span class="comment">//剪裁框比例</span></span><br><span class="line">x: <span class="number">0</span>,</span><br><span class="line">y: <span class="number">0</span>,</span><br><span class="line">width: <span class="number">0</span>,</span><br><span class="line">height: <span class="number">0</span>,</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">cropProportionSelect(nv, ov) &#123;</span><br><span class="line"><span class="keyword">this</span>.cropper.destroy();</span><br><span class="line"><span class="keyword">if</span> (nv == <span class="number">0</span> + <span class="string">''</span>) &#123;</span><br><span class="line"><span class="keyword">this</span>.cropProportion = <span class="literal">NaN</span>;</span><br><span class="line"><span class="keyword">this</span>.showCropper();</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (nv == <span class="number">1</span> + <span class="string">''</span>) &#123;</span><br><span class="line"><span class="keyword">this</span>.cropProportion =<span class="number">2.35</span>;</span><br><span class="line"><span class="keyword">this</span>.showCropper();</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (nv == <span class="number">2</span> + <span class="string">''</span>) &#123;</span><br><span class="line"><span class="keyword">this</span>.cropProportion = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">this</span>.showCropper();</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//上传文件中</span></span><br><span class="line">            progressFile() &#123;</span><br><span class="line">                <span class="keyword">this</span>.item_images = <span class="string">''</span>;</span><br><span class="line">                <span class="keyword">this</span>.finalImg = <span class="string">''</span>;</span><br><span class="line">                <span class="keyword">this</span>.loading = <span class="literal">true</span>;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//图片上传</span></span><br><span class="line">            saveFileList(response, file, fileList) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(file)</span><br><span class="line">                <span class="keyword">this</span>.item_images = file.response.data;</span><br><span class="line">                <span class="keyword">this</span>.loading = <span class="literal">false</span>;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"item_images:"</span> + <span class="built_in">JSON</span>.stringify(<span class="keyword">this</span>.item_images));</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.item_images != <span class="string">''</span>) &#123;</span><br><span class="line">                    <span class="keyword">this</span>.dialogVisible = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">this</span>.showCropper();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//剪裁框渲染</span></span><br><span class="line">            showCropper() &#123;</span><br><span class="line">                <span class="keyword">let</span> that = <span class="keyword">this</span>;</span><br><span class="line">                <span class="keyword">this</span>.croppShow = <span class="literal">true</span></span><br><span class="line">                setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"img_id"</span>)</span><br><span class="line">                    <span class="keyword">let</span> cropper = <span class="keyword">new</span> Cropper(canvas, &#123;</span><br><span class="line">                        <span class="comment">// initialAspectRatio: 1 / 1,//裁剪框宽高比的初始值 默认与图片宽高比相同 只有在aspectRatio没有设置的情况下可用</span></span><br><span class="line">                        aspectRatio: that.cropProportion,<span class="comment">//设置裁剪框为固定的宽高比</span></span><br><span class="line">                        minContainerHeight: <span class="number">200</span>,<span class="comment">//容器最小高度</span></span><br><span class="line">                        autoCropArea: <span class="number">0.6</span>,<span class="comment">//定义自动裁剪区域大小（百分比）</span></span><br><span class="line">                        <span class="comment">// zoomable:false,//不缩放图片</span></span><br><span class="line">                        <span class="comment">// zoomOnWheel:false,//滚动鼠标缩放</span></span><br><span class="line">                        background: <span class="literal">false</span>,<span class="comment">//背景网格</span></span><br><span class="line">                        guides: <span class="literal">false</span>,<span class="comment">//裁剪框虚线</span></span><br><span class="line">                        viewMode: <span class="number">1</span>,<span class="comment">//裁剪框不超出图片</span></span><br><span class="line">                        dragMode: <span class="string">'none'</span>,</span><br><span class="line">                        crop(event) &#123;</span><br><span class="line">                            <span class="comment">// console.log(event.detail.x);</span></span><br><span class="line">                            <span class="comment">// console.log(event.detail.y);</span></span><br><span class="line">                            <span class="comment">// console.log(event.detail.width);</span></span><br><span class="line">                            <span class="comment">// console.log(event.detail.height);</span></span><br><span class="line">                            <span class="comment">// console.log(event.detail.rotate);</span></span><br><span class="line">                            <span class="comment">// console.log(event.detail.scaleX);</span></span><br><span class="line">                            <span class="comment">// console.log(event.detail.scaleY);</span></span><br><span class="line">                            that.x = <span class="built_in">parseInt</span>(event.detail.x)</span><br><span class="line">                            that.y = <span class="built_in">parseInt</span>(event.detail.y)</span><br><span class="line">                            that.width = <span class="built_in">parseInt</span>(event.detail.width)</span><br><span class="line">                            that.height = <span class="built_in">parseInt</span>(event.detail.height)</span><br><span class="line">                            <span class="comment">// that.finalImg=that.item_images+`?x-oss-process=image/crop,x_$&#123;event.detail.x&#125;,y_$&#123;event.detail.y&#125;,w_$&#123;event.detail.width&#125;,h_$&#123;event.detail.height&#125;`</span></span><br><span class="line">                            that.finalImg = that.item_images + <span class="string">`?x-oss-process=image/crop,x_<span class="subst">$&#123;that.x&#125;</span>,y_<span class="subst">$&#123;that.y&#125;</span>,w_<span class="subst">$&#123;that.width&#125;</span>,h_<span class="subst">$&#123;that.height&#125;</span>`</span></span><br><span class="line">                            <span class="comment">// console.log(that.finalImg)</span></span><br><span class="line">                        &#125;,</span><br><span class="line"></span><br><span class="line">                    &#125;)</span><br><span class="line">                    <span class="keyword">this</span>.cropper = cropper</span><br><span class="line">                &#125;, <span class="number">10</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 确认裁剪</span></span><br><span class="line">            sureCropper() &#123;</span><br><span class="line">                <span class="keyword">let</span> obj = &#123;</span><br><span class="line">                    image_url: <span class="keyword">this</span>.item_images,</span><br><span class="line">                    image_cutting_url: <span class="keyword">this</span>.finalImg,</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">this</span>.$http.post(<span class="string">"/api/manager/image/cutting"</span>, obj).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> data = res.data.data;</span><br><span class="line">                    <span class="keyword">this</span>.dialogVisible = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">this</span>.croppShow = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">this</span>.item_images = <span class="keyword">this</span>.finalImg;</span><br><span class="line">                    <span class="keyword">this</span>.loadList();</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 销毁裁剪框</span></span><br><span class="line">            cancelCropper() &#123;</span><br><span class="line">                <span class="keyword">this</span>.dialogVisible = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">this</span>.cropper.destroy()</span><br><span class="line">                <span class="keyword">this</span>.croppShow = <span class="literal">false</span></span><br><span class="line">                <span class="keyword">this</span>.cropper = <span class="literal">null</span></span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="cropper-附录"><a href="#cropper-附录" class="headerlink" title="cropper 附录"></a><strong>cropper 附录</strong></h3><p>地址: <a href="https://github.com/fengyuanchen/cropperjs#mincontainerheight" target="_blank" rel="noopener">gitHub 地址</a></p>
<blockquote>
<p>简单翻译文档</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">## 配置对象</span><br><span class="line">&gt; https:&#x2F;&#x2F;github.com&#x2F;fengyuanchen&#x2F;cropperjs</span><br><span class="line">__注意：第一个值为默认值__</span><br><span class="line"></span><br><span class="line">- viewMode 视图控制</span><br><span class="line">    - 0 无限制</span><br><span class="line">    - 1 限制裁剪框不能超出图片的范围</span><br><span class="line">    - 2 限制裁剪框不能超出图片的范围 且图片填充模式为 cover 最长边填充</span><br><span class="line">    - 3 限制裁剪框不能超出图片的范围 且图片填充模式为 contain 最短边填充</span><br><span class="line">- dragMode 拖拽图片模式</span><br><span class="line">    - crop 形成新的裁剪框</span><br><span class="line">    - move 图片可移动</span><br><span class="line">    - none 什么也没有</span><br><span class="line">- initialAspectRatio 裁剪框宽高比的初始值 默认与图片宽高比相同 只有在aspectRatio没有设置的情况下可用</span><br><span class="line">- aspectRatio 设置裁剪框为固定的宽高比</span><br><span class="line">- data 之前存储的裁剪后的数据 在初始化时会自动设置 只有在autoCrop设置为true时可用</span><br><span class="line">- preview 预览 设置一个区域容器预览裁剪后的结果</span><br><span class="line">    - Element, Array (elements), NodeList or String (selector)</span><br><span class="line">- responsive 在窗口尺寸调整后 进行响应式的重渲染 默认true</span><br><span class="line">- restore 在窗口尺寸调整后 恢复被裁剪的区域 默认true</span><br><span class="line">- checkCrossOrigin 检查图片是否跨域 默认true 如果是 会在被复制的图片元素上加上属性crossOrigin 并且在src上加上一个时间戳 避免重加载图片时因为浏览器缓存而加载错误</span><br><span class="line">- checkOrientation 检查图片的方向信息（仅JPEG图片有）默认true 在旋转图片时会对图片方向值做一些处理 以解决IOS设备上的一些问题</span><br><span class="line">- modal 是否显示图片和裁剪框之间的黑色蒙版 默认true</span><br><span class="line">- guides 是否显示裁剪框的虚线 默认true</span><br><span class="line">- center 是否显示裁剪框中间的 ‘+’ 指示器 默认true</span><br><span class="line">- highlight 是否显示裁剪框上面的白色蒙版 （很淡）默认true</span><br><span class="line">- background 是否在容器内显示网格状的背景 默认true</span><br><span class="line">- autoCrop 允许初始化时自动的裁剪图片 配合 data 使用 默认true</span><br><span class="line">- autoCropArea 设置裁剪区域占图片的大小 值为 0-1 默认 0.8 表示 80%的区域</span><br><span class="line">- movable 是否可以移动图片 默认true</span><br><span class="line">- rotatable 是否可以旋转图片 默认true</span><br><span class="line">- scalable 是否可以缩放图片（可以改变长宽） 默认true</span><br><span class="line">- zoomable 是否可以缩放图片（改变焦距） 默认true</span><br><span class="line">- zoomOnTouch 是否可以通过拖拽触摸缩放图片 默认true</span><br><span class="line">- zoomOnWheel 是否可以通过鼠标滚轮缩放图片 默认true</span><br><span class="line">- wheelZoomRatio 设置鼠标滚轮缩放的灵敏度 默认 0.1</span><br><span class="line">- cropBoxMovable 是否可以拖拽裁剪框 默认true</span><br><span class="line">- cropBoxResizable 是否可以改变裁剪框的尺寸 默认true</span><br><span class="line">- toggleDragModeOnDblclick 是否可以通过双击切换拖拽图片模式（move和crop）默认true 当拖拽图片模式为none时不可切换 该设置必须浏览器支持双击事件</span><br><span class="line">- minContainerWidth（200）、minContainerHeight（100）、minCanvasWidth（0）、minCanvasHeight（0）、minCropBoxWidth（0）、minCropBoxHeight（0） 容器、图片、裁剪框的 最小宽高 括号内为默认值 注意 裁剪框的最小高宽是相对与页面而言的 并非相对图片</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 方法</span><br><span class="line">__注意：如果方法没有被设置返回任何值，那么它会返回一个cropper的实例 因此多个方法可以使用链式写法__</span><br><span class="line"></span><br><span class="line">- crop() 手动显示裁剪框</span><br><span class="line">- reset() 重置图片和裁剪框为初始状态</span><br><span class="line">- replace(url[, hasSameSize]) 替换图片路径并且重建裁剪框</span><br><span class="line">    - url 新路径</span><br><span class="line">    - hasSameSize 默认值false 设置为true表示新老图片尺寸一样 只需要更换路径无需重建裁剪框</span><br><span class="line">- enable() 解冻 裁剪框</span><br><span class="line">- disable() 冻结 裁剪框</span><br><span class="line">- destroy() 摧毁裁剪框并且移除cropper实例</span><br><span class="line">- move(offsetX[, offsetY]) 移动图片指定距离 一个参数代表横纵向移动距离一样</span><br><span class="line">- moveTo(x[, y]) 移动图片到一个指定的点 一个参数代表横纵向移动距离一样</span><br><span class="line">- zoom(ratio) 缩放 ratio大于零是放大 小于零缩小</span><br><span class="line">- zoomTo(ratio[, pivot]) 缩放并设置中心点的位置</span><br><span class="line">- rotate(degree) 旋转 类似css</span><br><span class="line">- rotateTo(degree) 旋转到绝对角度</span><br><span class="line">- scale(scaleX[, scaleY])、scaleX(scaleX)、scaleY(scaleY) 缩放 一个参数代表横纵向缩放值一样</span><br><span class="line">- getData([rounded]) 返回裁剪区域基于原图片!原尺寸!的位置和尺寸 rounded默认为false 表示是否显示四舍五入后的数据 有了这些数据可以直接在原图上进行裁剪显示</span><br><span class="line">- setData(data) 改变裁剪区域基于原图的位置和尺寸 仅当viewMode 不为0时有效</span><br><span class="line">- getContainerData()、getImageData()、getCanvasData()、setCanvasData(data)、getCropBoxData()、setCropBoxData(data) 容器、图片容器（画布）、图片、裁剪区域相对容器的数据设置和获取</span><br><span class="line">- getCroppedCanvas([options]) 得到被裁剪图片的一个canvas对象 options设置这个canvas的一些数据</span><br><span class="line">    - width、height、minWidth、minHeight、maxWidth、maxHeight、fillColor、imageSmoothingEnabled（图片是否是光滑的 默认true）、imageSmoothingQuality（图片的质量 默认low 还有medium、high）</span><br><span class="line">- setAspectRatio(aspectRatio) 改变裁剪区域的宽高比</span><br><span class="line">- setDragMode([mode]) 设置拖拽图片模式</span><br><span class="line"></span><br><span class="line">## 事件</span><br><span class="line">- ready 渲染前（图片已经被加载、cropper实例已经准备完毕）的准备工作事件</span><br><span class="line">- cropstart、cropmove、cropend、crop 开始画裁剪框（或画布）、画裁剪框（或画布）的中途、裁剪框（或画布）画完、进行裁剪事件 event.detail.originalEvent、event.detail.action</span><br><span class="line">    - 当autoCrop为true crop事件会在ready之前触发</span><br><span class="line">- zoom 裁剪框缩放事件</span><br></pre></td></tr></table></figure>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="true">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='https://ddcz.oss-cn-beijing.aliyuncs.com/images/file-15907455327707H0n.mp3'></li>
                        
                    
                        
                            <li title='1' data-url='https://ddcz.oss-cn-beijing.aliyuncs.com/images/file-1590745808611iMGP.mp3'></li>
                        
                    
                        
                            <li title='2' data-url='https://ddcz.oss-cn-beijing.aliyuncs.com/images/file-1590745994297wVkB.mp3'></li>
                        
                    
                        
                            <li title='3' data-url='https://ddcz.oss-cn-beijing.aliyuncs.com/images/file-1590746334499BAN4.mp3'></li>
                        
                    
                        
                            <li title='4' data-url='https://ddcz.oss-cn-beijing.aliyuncs.com/images/file-15907467860895g8J.mp3'></li>
                        
                    
                        
                            <li title='5' data-url='https://ddcz.oss-cn-beijing.aliyuncs.com/images/file-1590746934261bb2Q.mp3'></li>
                        
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
		data-enable='false'
        data-ae='false'
        data-ci=''
        data-cs=''
        data-r=''
        data-o=''
        data-a=''
        data-d='false'
    >查看评论</div>


    </div>
    
        <div class='side'>
			<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#使用"><span class="toc-number">1.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cropper-附录"><span class="toc-number">2.</span> <span class="toc-text">cropper 附录</span></a></li></ol>	
        </div>
    
</div>


    </div>
</div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":200,"height":260},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
